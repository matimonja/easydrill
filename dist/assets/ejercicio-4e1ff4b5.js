import"./modulepreload-polyfill-3cfb730f.js";import{E as L}from"./ExerciseStorage-321cadc6.js";import{i as $,G as I}from"./SyncIndicator-7c816d96.js";import"./user-58edc8be.js";import"./client-c375c8af.js";import"./preload-helper-cf010ec4.js";const k=["blue","red","green","orange","violet"],S={title:"Posesión 5v5 con Transiciones",objective:"Transiciones rápidas",duration:"15 min",players:"5v5",fieldSize:"1/2 Cancha",category:"Sub-14",description:"Ejercicio de posesión en espacio reducido orientado a mejorar las transiciones ataque-defensa. Los equipos deben mantener la posesión con un máximo de 2 toques y buscar cambios de orientación rápidos. Al perder la pelota, presión inmediata durante 5 segundos.",materials:["12 Conos","20 Bochas","Pecheras (2 colores)","Silbato"],coachingPoints:["Mantener líneas de pase cortas y diagonales","Comunicación constante entre jugadores","Orientación del cuerpo antes de recibir","Presión coordinada al perder la pelota","Buscar superioridad numérica en zona de balón"],variantsEasier:["Permitir 3 toques por jugador","Agregar un comodín neutral","Ampliar el espacio de juego"],variantsHarder:["Reducir a 1 toque","Achicar el espacio","Limitar tiempo de posesión a 10 segundos"],successCriteria:"El equipo completa 8 pases consecutivos antes de buscar el cambio de orientación, manteniendo la presión post-pérdida durante al menos 5 segundos.",tags:[{label:"#posesión",color:"blue"},{label:"#transiciones",color:"red"},{label:"#pressing",color:"green"},{label:"#espacio-reducido",color:"orange"},{label:"#sub14",color:"violet"},{label:"#5v5",color:"blue"}]};document.addEventListener("DOMContentLoaded",async()=>{var n,a;const i=new URLSearchParams(window.location.search).get("id")??void 0;if(B(),i){const u=await new L().load(i),c=document.getElementById("exercise-not-found"),p=document.getElementById("info-panel-readonly"),v=document.getElementById("info-panel-form");if(!u){c&&c.classList.remove("hidden"),p&&p.classList.add("hidden"),v&&v.classList.add("hidden");return}if(c&&c.classList.add("hidden"),p&&p.classList.add("hidden"),v&&v.classList.remove("hidden"),C(u.metadata),A(i),j(i),$(),document.getElementById("drillPlayerCanvas")){const t=new I("drillPlayerCanvas",u.zoneConfig??void 0,i);t.start(),t.loadPromise&&t.loadPromise.then(()=>{t.setScene(0)}),t.setMode("play");const s=document.getElementById("btn-play-drill"),l=document.getElementById("drill-player-overlay");if(s){s.addEventListener("click",()=>{t.animationManager.isPlaying&&!t.animationManager.isPaused?(t.animationManager.pause(),s.innerHTML='<i class="fa-solid fa-play"></i>',l&&(l.style.background="rgba(0,0,0,0.3)")):(t.animationManager.play(0,t.entities),s.innerHTML='<i class="fa-solid fa-pause"></i>',l&&(l.style.background="transparent"))});const o=t.animationManager.stop.bind(t.animationManager);t.animationManager.stop=()=>{o(),s.innerHTML='<i class="fa-solid fa-play"></i>',l&&(l.style.background="rgba(0,0,0,0.3)")}}}}else(n=document.getElementById("exercise-not-found"))==null||n.classList.add("hidden"),(a=document.getElementById("info-panel-form"))==null||a.classList.add("hidden"),M(S)});function M(e){var a,r,u,c,p,v,f;const i=document.getElementById("info-panel-readonly");if(!i)return;const n=!!(e.duration||e.players||e.fieldSize||e.category);i.innerHTML=`
        <div class="detail-section detail-title-block">
            <div class="title-row">
                <h1 class="mock-title">${d(e.title??"")}</h1>
                <a href="editor.html" class="btn-edit"><i class="fa-solid fa-pen-to-square"></i> Editar Ejercicio</a>
            </div>
            ${e.objective?`<span class="badge-objective"><i class="fa-solid fa-bullseye"></i> ${d(e.objective)}</span>`:""}
        </div>
        ${n?`
        <div class="detail-section meta-bar" id="meta-bar">
            <div class="meta-item"><i class="fa-regular fa-clock"></i><span>${d(e.duration??"")}</span></div>
            <div class="meta-item"><i class="fa-solid fa-shirt"></i><span>${d(e.players??"")}</span></div>
            <div class="meta-item"><i class="fa-solid fa-vector-square"></i><span>${d(e.fieldSize??"")}</span></div>
            <div class="meta-item"><i class="fa-solid fa-tag"></i><span>${d(e.category??"")}</span></div>
        </div>
        `:""}
        ${e.description?`
        <div class="detail-section" id="section-description">
            <h2 class="section-heading">Descripción</h2>
            <p class="description-text">${d(e.description)}</p>
        </div>
        `:""}
        ${(a=e.materials)!=null&&a.length?`
        <div class="detail-section" id="section-materials">
            <h2 class="section-heading">Materiales</h2>
            <div class="chips-list">${e.materials.map(t=>`<span class="chip">${d(t)}</span>`).join("")}</div>
        </div>
        `:""}
        ${(r=e.coachingPoints)!=null&&r.length?`
        <div class="detail-section" id="section-coaching">
            <div class="accordion">
                <button type="button" class="accordion-toggle" aria-expanded="false">
                    <span><i class="fa-solid fa-clipboard-check"></i> Puntos Clave de Coaching</span>
                    <i class="fa-solid fa-chevron-down accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <ul class="coaching-list">${e.coachingPoints.map(t=>`<li><i class="fa-solid fa-check"></i> ${d(t)}</li>`).join("")}</ul>
                </div>
            </div>
        </div>
        `:""}
        ${(u=e.variantsEasier)!=null&&u.length||(c=e.variantsHarder)!=null&&c.length?`
        <div class="detail-section" id="section-variants">
            <div class="accordion">
                <button type="button" class="accordion-toggle" aria-expanded="false">
                    <span><i class="fa-solid fa-sliders"></i> Variantes y Progresiones</span>
                    <i class="fa-solid fa-chevron-down accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    ${(p=e.variantsEasier)!=null&&p.length?`<div class="variant-block variant-easier"><h3><i class="fa-solid fa-arrow-down"></i> Para facilitar</h3><ul>${e.variantsEasier.map(t=>`<li>${d(t)}</li>`).join("")}</ul></div>`:""}
                    ${(v=e.variantsHarder)!=null&&v.length?`<div class="variant-block variant-harder"><h3><i class="fa-solid fa-arrow-up"></i> Para dificultar</h3><ul>${e.variantsHarder.map(t=>`<li>${d(t)}</li>`).join("")}</ul></div>`:""}
                </div>
            </div>
        </div>
        `:""}
        ${e.successCriteria?`
        <div class="detail-section" id="section-success">
            <div class="success-box"><i class="fa-solid fa-trophy"></i><div><strong>Criterio de éxito</strong><p>${d(e.successCriteria)}</p></div></div>
        </div>
        `:""}
        ${(f=e.tags)!=null&&f.length?`
        <div class="detail-section" id="section-tags">
            <div class="tags-cloud">${e.tags.map(t=>`<span class="tag tag-${t.color}">${d(t.label)}</span>`).join("")}</div>
        </div>
        `:""}
    `,B()}function d(e){const i=document.createElement("div");return i.textContent=e,i.innerHTML}function B(){const e=window.matchMedia("(max-width: 743px)").matches||window.matchMedia("(max-height: 743px)").matches;document.querySelectorAll(".accordion-toggle").forEach(i=>{var n;(n=i.dataset)!=null&&n.accordionBound||(i.dataset.accordionBound="1",i.addEventListener("click",()=>{const a=i.closest(".accordion");if(!a)return;const r=a.classList.toggle("open");i.setAttribute("aria-expanded",r.toString())}))}),e||document.querySelectorAll(".accordion").forEach(i=>{i.classList.add("open");const n=i.querySelector(".accordion-toggle");n==null||n.setAttribute("aria-expanded","true")})}function C(e){const i=a=>document.getElementById(a),n=(a,r)=>{const u=i(a);u&&"value"in u&&(u.value=r??"")};n("input-title",e.title??""),n("input-objective",e.objective??""),n("input-duration",e.duration??""),n("input-players",e.players??""),n("input-fieldSize",e.fieldSize??""),n("input-category",e.category??""),n("input-description",e.description??""),n("input-successCriteria",e.successCriteria??""),x("materials-list",e.materials??[],!0),y("coaching-list",e.coachingPoints??[]),y("variants-easier-list",e.variantsEasier??[]),y("variants-harder-list",e.variantsHarder??[]),w("tags-list",e.tags??[])}function x(e,i,n){const a=document.getElementById(e);a&&(a.innerHTML=i.map(r=>`<span class="chip chip-editable">${d(r)}`+(n?' <button type="button" class="chip-remove" aria-label="Quitar"><i class="fa-solid fa-times"></i></button>':"")+"</span>").join(""),a.querySelectorAll(".chip-remove").forEach(r=>{r.addEventListener("click",()=>{const u=r.closest(".chip");u==null||u.remove()})}))}function y(e,i){const n=document.getElementById(e);n&&(n.innerHTML=i.map(a=>`<li class="editable-list-item">
                    <input type="text" class="list-item-input" value="${d(a)}" />
                    <button type="button" class="btn-remove-item" aria-label="Quitar"><i class="fa-solid fa-times"></i></button>
                </li>`).join(""),n.querySelectorAll(".btn-remove-item").forEach(a=>{a.addEventListener("click",()=>{var r;return(r=a.closest("li"))==null?void 0:r.remove()})}))}function w(e,i){const n=document.getElementById(e);n&&(n.innerHTML=i.map(a=>`<span class="tag tag-${a.color} tag-editable">${d(a.label)} <button type="button" class="chip-remove" aria-label="Quitar tag"><i class="fa-solid fa-times"></i></button></span>`).join(""),n.querySelectorAll(".chip-remove").forEach(a=>{a.addEventListener("click",()=>{var r;return(r=a.closest(".tag"))==null?void 0:r.remove()})}))}function E(e){var n;const i=e.cloneNode(!0);return(n=i.querySelector(".chip-remove"))==null||n.remove(),(i.textContent??"").trim()}function q(){const e=c=>{var v;const p=document.getElementById(c);return((v=p==null?void 0:p.value)==null?void 0:v.trim())??""},i=Array.from(document.querySelectorAll("#materials-list .chip-editable")).map(E).filter(Boolean),n=Array.from(document.querySelectorAll("#coaching-list .list-item-input")).map(c=>c.value.trim()).filter(Boolean),a=Array.from(document.querySelectorAll("#variants-easier-list .list-item-input")).map(c=>c.value.trim()).filter(Boolean),r=Array.from(document.querySelectorAll("#variants-harder-list .list-item-input")).map(c=>c.value.trim()).filter(Boolean),u=Array.from(document.querySelectorAll("#tags-list .tag-editable")).map(c=>{const p=E(c),v=k.find(f=>c.classList.contains(`tag-${f}`))??"blue";return{label:p,color:v}}).filter(c=>c.label);return{title:e("input-title")||"Sin título",objective:e("input-objective")||void 0,duration:e("input-duration")||void 0,players:e("input-players")||void 0,fieldSize:e("input-fieldSize")||void 0,category:e("input-category")||void 0,description:e("input-description")||void 0,materials:i.length?i:void 0,coachingPoints:n.length?n:void 0,variantsEasier:a.length?a:void 0,variantsHarder:r.length?r:void 0,successCriteria:e("input-successCriteria")||void 0,tags:u.length?u:void 0}}function A(e){var n,a,r,u,c,p,v,f;const i=new L;(n=document.getElementById("btn-save"))==null||n.addEventListener("click",()=>{const t=q(),s=i.updateMetadata(e,t);P(s?"Guardado":"No se pudo guardar")}),(a=document.getElementById("btn-add-material"))==null||a.addEventListener("click",()=>{var g,m;const t=document.getElementById("input-material-new"),s=(g=t==null?void 0:t.value)==null?void 0:g.trim();if(!s)return;const l=document.getElementById("materials-list");if(!l)return;const o=document.createElement("span");o.className="chip chip-editable",o.innerHTML=`${d(s)} <button type="button" class="chip-remove" aria-label="Quitar"><i class="fa-solid fa-times"></i></button>`,(m=o.querySelector(".chip-remove"))==null||m.addEventListener("click",()=>o.remove()),l.appendChild(o),t.value=""}),(r=document.getElementById("btn-add-coaching"))==null||r.addEventListener("click",()=>{var g,m;const t=document.getElementById("input-coaching-new"),s=(g=t==null?void 0:t.value)==null?void 0:g.trim();if(!s)return;const l=document.getElementById("coaching-list");if(!l)return;const o=document.createElement("li");o.className="editable-list-item",o.innerHTML=`<input type="text" class="list-item-input" value="${d(s)}" /><button type="button" class="btn-remove-item" aria-label="Quitar"><i class="fa-solid fa-times"></i></button>`,(m=o.querySelector(".btn-remove-item"))==null||m.addEventListener("click",()=>o.remove()),l.appendChild(o),t.value=""}),(u=document.getElementById("btn-add-variant-easier"))==null||u.addEventListener("click",()=>{var g,m;const t=document.getElementById("input-variant-easier-new"),s=(g=t==null?void 0:t.value)==null?void 0:g.trim();if(!s)return;const l=document.getElementById("variants-easier-list");if(!l)return;const o=document.createElement("li");o.className="editable-list-item",o.innerHTML=`<input type="text" class="list-item-input" value="${d(s)}" /><button type="button" class="btn-remove-item" aria-label="Quitar"><i class="fa-solid fa-times"></i></button>`,(m=o.querySelector(".btn-remove-item"))==null||m.addEventListener("click",()=>o.remove()),l.appendChild(o),t.value=""}),(c=document.getElementById("btn-add-variant-harder"))==null||c.addEventListener("click",()=>{var g,m;const t=document.getElementById("input-variant-harder-new"),s=(g=t==null?void 0:t.value)==null?void 0:g.trim();if(!s)return;const l=document.getElementById("variants-harder-list");if(!l)return;const o=document.createElement("li");o.className="editable-list-item",o.innerHTML=`<input type="text" class="list-item-input" value="${d(s)}" /><button type="button" class="btn-remove-item" aria-label="Quitar"><i class="fa-solid fa-times"></i></button>`,(m=o.querySelector(".btn-remove-item"))==null||m.addEventListener("click",()=>o.remove()),l.appendChild(o),t.value=""}),(p=document.getElementById("btn-add-tag"))==null||p.addEventListener("click",()=>{var b,h;const t=document.getElementById("input-tag-label"),s=document.getElementById("input-tag-color"),l=(b=t==null?void 0:t.value)==null?void 0:b.trim();if(!l)return;const o=(s==null?void 0:s.value)??"blue",g=document.getElementById("tags-list");if(!g)return;const m=document.createElement("span");m.className=`tag tag-${o} tag-editable`,m.innerHTML=`${d(l)} <button type="button" class="chip-remove" aria-label="Quitar tag"><i class="fa-solid fa-times"></i></button>`,(h=m.querySelector(".chip-remove"))==null||h.addEventListener("click",()=>m.remove()),g.appendChild(m),t.value=""}),(v=document.getElementById("input-material-new"))==null||v.addEventListener("keydown",t=>{var s;t.key==="Enter"&&((s=document.getElementById("btn-add-material"))==null||s.click())}),(f=document.getElementById("input-coaching-new"))==null||f.addEventListener("keydown",t=>{var s;t.key==="Enter"&&((s=document.getElementById("btn-add-coaching"))==null||s.click())})}function j(e){const i=document.getElementById("btn-edit-exercise");i&&(i.href=`editor.html?id=${encodeURIComponent(e)}`)}function P(e){const i=document.getElementById("toast");i&&(i.textContent=e,i.classList.remove("hidden"),setTimeout(()=>i.classList.add("hidden"),2500))}
