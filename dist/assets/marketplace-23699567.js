import"./modulepreload-polyfill-3cfb730f.js";import{i as h}from"./nav-auth-1aae0094.js";/* empty css                    */import"./user-58edc8be.js";import"./client-c375c8af.js";const y={pases:"tag-blue",posesion:"tag-green",ataque:"tag-orange",defensa:"tag-red",transicion:"tag-violet",salida:"tag-blue",contencion:"tag-green",press:"tag-red"},E=[{id:"1",title:"Ronda de pases en triángulo",description:"Ejercicio de posesión y movimiento para mediocampo. Ideal para calentar o trabajar apoyos.",tags:["pases","posesion","ataque"]},{id:"2",title:"Presión post pérdida",description:"Transición defensiva y recuperación rápida. Trabaja la reacción al perder el balón.",tags:["defensa","transicion"]},{id:"3",title:"Salida desde el arco",description:"Construcción desde atrás con apoyos y desmarques. Salida limpia bajo presión.",tags:["salida","contencion"]},{id:"4",title:"Rondo 4v2 en espacio reducido",description:"Mantener la pelota en superioridad numérica. Pases rápidos y movilidad.",tags:["posesion","press"]},{id:"5",title:"Cambio de juego y amplitud",description:"Pases largos para abrir el campo y aprovechar los espacios por las bandas.",tags:["pases","ataque"]},{id:"6",title:"Bloqueo defensivo en línea",description:"Trabajo de línea de defensores y coberturas. Comunicación y repliegue.",tags:["defensa","contencion"]},{id:"7",title:"Contraataque 3v2",description:"Transición rápida al ataque tras recuperar. Finalización en superioridad.",tags:["transicion","ataque"]},{id:"8",title:"Posesión 6v4 con comodines",description:"Mantener la pelota con comodines en el exterior. Circulación y paciencia.",tags:["posesion","pases"]},{id:"9",title:"Pressing alto en bloque",description:"Presión coordinada tras pérdida en campo rival. Recuperación en zona alta.",tags:["press","defensa"]}],m={pases:"Pases",posesion:"Posesión",ataque:"Ataque",defensa:"Defensa",transicion:"Transición",salida:"Salida",contencion:"Contención",press:"Press"},b=Object.keys(m);function C(){return E}function L(e,i,n){e.innerHTML="",b.forEach(t=>{const a=document.createElement("button");a.type="button",a.className="filter-tag"+(i.has(t)?" active":""),a.textContent=m[t],a.dataset.tag=t,a.addEventListener("click",()=>n(t)),e.appendChild(a)})}function k(e,i){e.querySelectorAll(".filter-tag").forEach(n=>{const t=n.dataset.tag;n.classList.toggle("active",i.has(t))})}function T(e){const i=e.thumbnail?`<img src="${e.thumbnail}" alt="" loading="lazy" />`:'<span class="carousel-thumb-placeholder"><i class="fa-solid fa-play"></i> Vista previa</span>',n=e.tags.map(t=>`<span class="tag ${y[t]}">${m[t]}</span>`).join("");return`
    <article class="marketplace-card" data-id="${e.id}">
      <div class="carousel-thumb" aria-hidden="true">${i}</div>
      <div class="carousel-body">
        <h4>${g(e.title)}</h4>
        <p>${g(e.description)}</p>
        <div class="carousel-tags">${n}</div>
        <div class="marketplace-card-actions">
          <a href="editor.html?drill=${encodeURIComponent(e.id)}" class="card-action-link"><i class="fa-solid fa-pen-ruler"></i> Abrir en pizarrón</a>
          <a href="editor.html?drill=${encodeURIComponent(e.id)}&fork=1" class="card-action-fork" title="Hacer fork: copiar a tu cuaderno"><i class="fa-solid fa-code-branch"></i> Fork</a>
        </div>
      </div>
    </article>
  `}function g(e){const i=document.createElement("div");return i.textContent=e,i.innerHTML}function q(e,i,n,t){let a=e.slice();const s=i.trim().toLowerCase();return s&&(a=a.filter(o=>o.title.toLowerCase().includes(s)||o.description.toLowerCase().includes(s)||o.tags.some(r=>m[r].toLowerCase().includes(s)))),n.size>0&&(a=a.filter(o=>o.tags.some(r=>n.has(r)))),t==="name-asc"?a.sort((o,r)=>o.title.localeCompare(r.title)):t==="name-desc"&&a.sort((o,r)=>r.title.localeCompare(o.title)),a}function j(){const e=document.getElementById("marketplace-search"),i=document.getElementById("filter-tags"),n=document.getElementById("filter-reset"),t=document.getElementById("empty-reset"),a=document.getElementById("marketplace-count"),s=document.getElementById("marketplace-sort"),o=document.getElementById("marketplace-grid"),r=document.getElementById("marketplace-empty");if(!i||!o||!a||!r)return;const f=C();let c=new Set,p="",u="relevance";function d(){const l=q(f,p,c,u);a.textContent=l.length===1?"1 ejercicio":`${l.length} ejercicios`,o.innerHTML=l.map(v=>T(v)).join(""),r.hidden=l.length>0,k(i,c)}L(i,c,l=>{c.has(l)?c.delete(l):c.add(l),d()}),e==null||e.addEventListener("input",()=>{p=e.value,d()}),s==null||s.addEventListener("change",()=>{u=s.value,d()}),n==null||n.addEventListener("click",()=>{c.clear(),e&&(e.value=""),p="",s&&(s.value="relevance"),u="relevance",d()}),t==null||t.addEventListener("click",()=>{c.clear(),e&&(e.value=""),p="",s&&(s.value="relevance"),u="relevance",d(),r.hidden=!0}),d()}document.body.classList.contains("marketplace-page")&&(j(),h());
