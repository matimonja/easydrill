:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;--bg-dark: #1a1a1a;--bg-panel: #222;--border-color: #333;--accent-color: #3b82f6;--accent-hover: #2563eb;--text-color: #eee;--text-muted: #888;--toolbar-height: 120px;--card-bg: #2a2a2a;--card-border: #3a3a3a;--card-active-border: var(--accent-color);--cta-gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)}*{box-sizing:border-box}body{margin:0;padding:0;overflow:hidden;background-color:var(--bg-dark);width:100vw;height:100vh;height:100dvh;-webkit-user-select:none;user-select:none;color:var(--text-color)}#app{width:100%;height:100vh;height:100dvh;display:flex;flex-direction:column;position:relative}#game-container{position:relative;flex:1;overflow:hidden;background:#111;touch-action:none}#gameCanvas{display:block;width:100%;height:100%;cursor:crosshair;touch-action:none}.main-toolbar{height:var(--toolbar-height);background:var(--bg-panel);border-top:1px solid var(--border-color);display:flex;align-items:stretch;padding:0;box-shadow:0 -4px 10px #0000004d;z-index:20}.toolbar-section{padding:10px;display:flex;align-items:center;justify-content:center}.separator-vertical{width:1px;background:var(--border-color);margin:10px 0}.section-modes{flex:0 0 auto;display:grid;grid-template-rows:repeat(2,40px);grid-auto-flow:column;gap:8px;padding:10px;background:rgba(0,0,0,.2)}.mode-btn{width:40px;height:40px;background:transparent;border:1px solid transparent;border-radius:8px;color:#888;cursor:pointer;font-size:18px;transition:all .2s}.mode-btn:hover{background:rgba(255,255,255,.05);color:#fff}.mode-btn.active{background:var(--accent-color);color:#fff;box-shadow:0 2px 5px #0003}.section-tools{flex:0 0 auto;justify-content:flex-start;min-width:150px}.tools-grid{display:grid;grid-template-rows:repeat(2,1fr);grid-auto-flow:column;grid-auto-columns:minmax(40px,1fr);gap:8px;width:auto}.tools-grid.hidden{display:none!important}.tools-grid.play-tools-panel{display:flex;align-items:center;gap:10px}.tool-btn{width:100%;height:40px;background:#333;border:1px solid #444;border-radius:6px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;font-size:18px}.tool-btn:hover{background:#444}.tool-btn.active{background:var(--accent-color);border-color:#60a5fa}.sync-indicator{display:inline-flex;align-items:center;justify-content:center;font-size:14px;width:28px;height:28px;flex-shrink:0}.sync-indicator.hidden{display:none}.placeholder-msg{grid-column:1 / -1;grid-row:1 / -1;display:flex;align-items:center;justify-content:center;color:#666;font-size:.9rem}.section-properties{flex:1;justify-content:flex-start;background:rgba(0,0,0,.1);overflow-x:auto;padding:0 20px}.properties-content{width:100%;height:100%;display:flex;align-items:center;gap:15px}.placeholder-text-small{color:#555;font-size:.9rem;font-style:italic}.prop-btn{background:#333;border:1px solid #444;color:#eee;padding:8px 16px;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:.9rem;transition:all .2s}.prop-btn:hover{background:#444;border-color:#555}.prop-btn.active-prop{background:#3b82f6;border-color:#60a5fa}.prop-btn.danger{background:#7f1d1d;border-color:#991b1b}.prop-btn.danger:hover{background:#991b1b}.secondary-menu{position:absolute;top:20px;left:20px;bottom:20px;width:260px;background:rgba(30,30,30,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--border-color);border-radius:12px;box-shadow:4px 0 10px #0000004d;z-index:10;transition:transform .3s ease;display:flex;flex-direction:column}.secondary-menu.collapsed{transform:translate(-120%)}.menu-header{padding:15px;border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;font-weight:700;font-size:1.1rem}.icon-btn{background:transparent;border:none;color:#ccc;cursor:pointer;font-size:1rem;padding:5px;border-radius:4px}.icon-btn:hover{background:rgba(255,255,255,.1);color:#fff}.menu-content{padding:15px;flex:1;overflow-y:auto}.placeholder-text{color:#666;font-style:italic;text-align:center;margin-top:20px}.menu-control-group{margin-bottom:20px;display:flex;flex-direction:column;gap:8px}.menu-label{font-size:.9rem;color:#aaa;font-weight:500}.menu-input,.menu-select{background:#333;border:1px solid #444;color:#fff;padding:8px;border-radius:6px;width:100%;font-size:.9rem}.menu-input[type=color]{height:40px;padding:2px;cursor:pointer}.menu-input[type=range]{-webkit-appearance:none;background:transparent}.menu-input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:16px;width:16px;border-radius:50%;background:var(--accent-color);margin-top:-6px;cursor:pointer}.menu-input[type=range]::-webkit-slider-runnable-track{width:100%;height:4px;background:#444;border-radius:2px}.checkbox-wrapper{display:flex;flex-direction:row;align-items:center;gap:10px}.checkbox-wrapper input[type=checkbox]{width:18px;height:18px;accent-color:var(--accent-color)}.color-palette{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px}.color-swatch{width:24px;height:24px;border-radius:50%;border:2px solid #444;cursor:pointer;transition:transform .1s}.color-swatch:hover{transform:scale(1.1);border-color:#fff}.floating-toggle{position:absolute;top:20px;left:20px;width:40px;height:40px;background:var(--bg-panel);border:1px solid var(--border-color);border-radius:8px;color:#fff;cursor:pointer;z-index:5;display:flex;align-items:center;justify-content:center;box-shadow:2px 2px 5px #0000004d;transition:opacity .3s}.floating-toggle.hidden{opacity:0;pointer-events:none}.rotate-overlay{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:100;background:var(--bg-dark);align-items:center;justify-content:center;padding:2rem;box-sizing:border-box}.rotate-overlay.visible{display:flex}.rotate-overlay-content{text-align:center;max-width:280px}.rotate-overlay-content i{font-size:4rem;color:var(--accent-color);margin-bottom:1.5rem;display:block;animation:rotate-hint 2s ease-in-out infinite}@keyframes rotate-hint{0%,to{transform:rotate(-30deg)}50%{transform:rotate(30deg)}}.rotate-overlay-content p{margin:0;font-size:1.1rem;color:var(--text-color);line-height:1.5}@media (max-width: 743px) and (orientation: portrait),(max-height: 743px) and (orientation: portrait){.rotate-overlay,.rotate-overlay.visible{display:flex}}@media (max-width: 743px) and (orientation: landscape),(max-height: 743px) and (orientation: landscape){.rotate-overlay{display:none!important}}.main-toolbar{position:relative}.main-toolbar-content{display:flex;align-items:stretch;flex:1;min-width:0}.toolbar-collapse-btn{display:none;flex-shrink:0;align-items:center;justify-content:center;width:44px;min-width:44px;height:44px;min-height:44px;background:rgba(0,0,0,.3);border:none;border-left:1px solid var(--border-color);color:var(--text-color);cursor:pointer;-webkit-tap-highlight-color:transparent}.toolbar-collapse-btn:hover{background:rgba(0,0,0,.5)}.toolbar-collapse-btn i{font-size:1rem;transition:transform .2s}.main-toolbar.collapsed .toolbar-collapse-btn i.fa-chevron-down{display:none}.main-toolbar.collapsed .toolbar-collapse-btn i.fa-chevron-up{display:inline-block}.main-toolbar .toolbar-collapse-btn i.fa-chevron-up,.properties-side-panel{display:none}@media (max-width: 743px),(max-height: 743px){:root{--toolbar-height: 48px}.toolbar-collapse-btn{display:flex}.main-toolbar{order:-1;padding:4px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;transition:height .25s ease,min-height .25s ease;border-top:none;border-bottom:1px solid var(--border-color);box-shadow:0 4px 10px #0000004d}.main-toolbar.collapsed{height:40px!important;min-height:40px;padding:0;padding-top:env(safe-area-inset-top,0);align-items:center;justify-content:center}.main-toolbar.collapsed .main-toolbar-content{display:none}.main-toolbar.collapsed .toolbar-collapse-btn{border-left:none;width:100%;border-radius:0}.section-modes{flex:0 0 auto;grid-template-rows:1fr;gap:4px;padding:4px}.mode-btn{min-width:36px;min-height:36px;width:36px;height:36px;font-size:14px}.tools-grid{grid-template-rows:1fr;grid-auto-columns:minmax(36px,1fr);gap:4px}.tool-btn{min-width:36px;min-height:36px;height:36px;font-size:14px}.section-properties{display:none!important}.section-properties+.separator-vertical,.section-tools+.separator-vertical:last-of-type{display:none}.separator-vertical{margin:4px 0}#section-scenes{padding:2px 6px!important;min-width:auto!important;gap:2px!important}#section-scenes>div:first-child{display:none!important}#section-scenes .prop-btn{width:30px!important;height:30px!important;padding:0!important;font-size:0!important;min-width:30px;overflow:hidden}#section-scenes .prop-btn i{font-size:12px!important}.properties-side-panel{display:flex;flex-direction:column;position:absolute;top:10px;right:10px;bottom:10px;width:min(260px,calc(100vw - 80px));background:rgba(30,30,30,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--border-color);border-radius:12px;box-shadow:-4px 0 20px #00000080;z-index:12;transition:transform .3s ease,opacity .3s ease;overflow:hidden}.properties-side-panel.collapsed{transform:translate(calc(100% + 20px));opacity:0;pointer-events:none}.properties-side-panel:not(.collapsed){transform:translate(0);opacity:1}.properties-side-panel .panel-header{padding:10px 12px;border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;font-weight:700;font-size:.95rem;flex-shrink:0}.properties-side-panel .panel-content{padding:10px 12px;flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch}.properties-side-panel .menu-control-group{margin-bottom:14px}.properties-side-panel .prop-btn{padding:6px 12px;font-size:.85rem}.properties-side-panel .color-palette{gap:6px}.properties-side-panel .color-swatch{width:22px;height:22px}.accordion-section{border:1px solid var(--border-color);border-radius:8px;margin-bottom:8px;overflow:hidden}.accordion-header{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:rgba(0,0,0,.2);cursor:pointer;font-size:.85rem;font-weight:500;color:#ccc;border:none;width:100%;-webkit-tap-highlight-color:transparent}.accordion-header:hover{background:rgba(0,0,0,.3)}.accordion-header i.accordion-chevron{transition:transform .2s;font-size:.7rem;color:#888}.accordion-section.open .accordion-header i.accordion-chevron{transform:rotate(180deg)}.accordion-body{max-height:0;overflow:hidden;transition:max-height .25s ease;padding:0 10px}.accordion-section.open .accordion-body{max-height:500px;padding:8px 10px}.secondary-menu{width:min(280px,calc(100vw - 32px));max-width:100%;left:0;top:0;bottom:0;transform:translate(calc(-100% - 16px));border-radius:0 12px 12px 0;box-shadow:4px 0 20px #00000080}.secondary-menu:not(.collapsed){transform:translate(0)}.secondary-menu.collapsed{transform:translate(calc(-100% - 16px))}.floating-toggle{width:44px;height:44px;min-width:44px;min-height:44px;font-size:1.1rem}.menu-input[type=range]{min-height:36px}.menu-input[type=range]::-webkit-slider-thumb{height:20px;width:20px}.icon-btn{min-width:40px;min-height:40px;padding:8px}}.confirm-dialog-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:200;background:rgba(0,0,0,.65);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;animation:fade-in .15s ease}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.confirm-dialog{background:#2a2a2a;border:1px solid #444;border-radius:14px;padding:24px;max-width:320px;width:90%;box-shadow:0 12px 40px #00000080;animation:dialog-pop .2s ease}@keyframes dialog-pop{0%{transform:scale(.92);opacity:0}to{transform:scale(1);opacity:1}}.confirm-dialog-title{font-size:1.1rem;font-weight:700;color:#fff;margin-bottom:8px}.confirm-dialog-message{font-size:.9rem;color:#aaa;line-height:1.5;margin-bottom:20px}.confirm-dialog-actions{display:flex;gap:10px;justify-content:flex-end}.confirm-dialog-btn{padding:8px 18px;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;border:1px solid transparent;transition:all .15s}.confirm-dialog-btn.cancel{background:#333;border-color:#555;color:#ccc}.confirm-dialog-btn.cancel:hover{background:#444;color:#fff}.confirm-dialog-btn.confirm{background:#991b1b;border-color:#b91c1c;color:#fff}.confirm-dialog-btn.confirm:hover{background:#b91c1c}#setup-screen{height:100vh;height:100dvh;display:flex;align-items:center;justify-content:center;padding:20px;background:var(--bg-dark);overflow-y:auto;overflow-x:hidden}.setup-container{width:100%;max-width:820px;display:flex;flex-direction:column;gap:28px;animation:setupFadeIn .4s ease}@keyframes setupFadeIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.setup-header{text-align:center}.setup-header h1{font-size:1.6rem;font-weight:700;margin-bottom:6px;background:linear-gradient(90deg,#60a5fa,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.setup-header p{color:var(--text-muted);font-size:.95rem}.zone-cards{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}.zone-card{background:var(--card-bg);border:2px solid var(--card-border);border-radius:12px;padding:16px 12px;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:10px;transition:all .25s ease;min-height:120px;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.zone-card:hover{border-color:#555;background:#303030;transform:translateY(-2px)}.zone-card.active{border-color:var(--card-active-border);background:rgba(59,130,246,.12);box-shadow:0 0 16px #3b82f633}.zone-card-icon{width:56px;height:40px;position:relative;flex-shrink:0}.zone-card-icon .mini-field{width:100%;height:100%;border:2px solid #555;border-radius:3px;position:relative;background:#1e3a5f}.zone-card-icon .mini-field .zone-highlight{position:absolute;background:rgba(59,130,246,.35);border:1.5px solid var(--accent-color);border-radius:2px}.zone-card-icon .mini-field .zone-full{top:0;right:0;bottom:0;left:0}.zone-card-icon .mini-field .zone-half{top:0;right:0;bottom:0;width:50%}.zone-card-icon .mini-field .zone-quarter{top:0;right:0;bottom:0;width:25%}.zone-card-icon .mini-field .zone-area{top:11%;right:0;width:21%;height:78%;border-radius:2px 0 0 2px}.zone-card-icon .mini-field .zone-custom{top:20%;left:15%;width:45%;height:55%;border-style:dashed}.zone-card-label{font-size:.8rem;font-weight:600;text-align:center;color:#ccc;line-height:1.2}.zone-card.active .zone-card-label{color:#fff}.custom-zone-section{display:none;flex-direction:column;gap:12px;animation:setupFadeIn .3s ease}.custom-zone-section.visible{display:flex}.custom-zone-section .section-label{font-size:.85rem;color:var(--text-muted);text-align:center}.custom-canvas-wrapper{width:100%;aspect-ratio:914 / 550;max-height:340px;background:#111;border:1px solid var(--border-color);border-radius:10px;overflow:hidden;position:relative;cursor:crosshair;touch-action:none}.custom-canvas-wrapper canvas{display:block;width:100%;height:100%}.setup-cta{width:100%;padding:16px 24px;font-size:1.05rem;font-weight:700;color:#fff;background:var(--cta-gradient);border:none;border-radius:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .25s ease;box-shadow:0 4px 14px #3b82f64d;-webkit-tap-highlight-color:transparent}.setup-cta:hover{background:linear-gradient(135deg,#2563eb 0%,#1d4ed8 100%);transform:translateY(-1px);box-shadow:0 6px 20px #3b82f666}.setup-cta:active{transform:translateY(0)}.setup-cta:disabled{opacity:.5;cursor:not-allowed;transform:none}.setup-back{text-align:center}.setup-back a{color:var(--text-muted);text-decoration:none;font-size:.85rem;display:inline-flex;align-items:center;gap:6px;transition:color .2s}.setup-back a:hover{color:#fff}@media (max-width: 600px){#setup-screen{padding:30px 16px 16px;align-items:flex-start}.setup-header h1{font-size:1.3rem}.zone-cards{grid-template-columns:repeat(3,1fr);gap:10px}.zone-card{min-height:100px;padding:14px 10px}.setup-cta{min-height:52px;font-size:1rem}.custom-canvas-wrapper{max-height:260px}}@media (max-width: 360px){.setup-header h1{font-size:1.1rem}.zone-card-icon{width:44px;height:32px}.zone-card-label{font-size:.75rem}}
