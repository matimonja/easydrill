/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Bt=function(){function n(r){var e=r||{},i=e.ValidationData,s=e.Username,u=e.Password,f=e.AuthParameters,l=e.ClientMetadata;this.validationData=i||{},this.authParameters=f||{},this.clientMetadata=l||{},this.username=s,this.password=u}var t=n.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},n}();function je(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(e){var i=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(r,e,i.get?i:{enumerable:!0,get:function(){return n[e]}})}),r}var _={},Se={};Se.byteLength=Ot;Se.toByteArray=kt;Se.fromByteArray=Lt;var H=[],V=[],bt=typeof Uint8Array<"u"?Uint8Array:Array,Fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var re=0,Mt=Fe.length;re<Mt;++re)H[re]=Fe[re],V[Fe.charCodeAt(re)]=re;V["-".charCodeAt(0)]=62;V["_".charCodeAt(0)]=63;function ct(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=n.indexOf("=");r===-1&&(r=t);var e=r===t?0:4-r%4;return[r,e]}function Ot(n){var t=ct(n),r=t[0],e=t[1];return(r+e)*3/4-e}function Nt(n,t,r){return(t+r)*3/4-r}function kt(n){var t,r=ct(n),e=r[0],i=r[1],s=new bt(Nt(n,e,i)),u=0,f=i>0?e-4:e,l;for(l=0;l<f;l+=4)t=V[n.charCodeAt(l)]<<18|V[n.charCodeAt(l+1)]<<12|V[n.charCodeAt(l+2)]<<6|V[n.charCodeAt(l+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=t&255;return i===2&&(t=V[n.charCodeAt(l)]<<2|V[n.charCodeAt(l+1)]>>4,s[u++]=t&255),i===1&&(t=V[n.charCodeAt(l)]<<10|V[n.charCodeAt(l+1)]<<4|V[n.charCodeAt(l+2)]>>2,s[u++]=t>>8&255,s[u++]=t&255),s}function Kt(n){return H[n>>18&63]+H[n>>12&63]+H[n>>6&63]+H[n&63]}function Vt(n,t,r){for(var e,i=[],s=t;s<r;s+=3)e=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(Kt(e));return i.join("")}function Lt(n){for(var t,r=n.length,e=r%3,i=[],s=16383,u=0,f=r-e;u<f;u+=s)i.push(Vt(n,u,u+s>f?f:u+s));return e===1?(t=n[r-1],i.push(H[t>>2]+H[t<<4&63]+"==")):e===2&&(t=(n[r-2]<<8)+n[r-1],i.push(H[t>>10]+H[t>>4&63]+H[t<<2&63]+"=")),i.join("")}var He={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */He.read=function(n,t,r,e,i){var s,u,f=i*8-e-1,l=(1<<f)-1,d=l>>1,p=-7,v=r?i-1:0,m=r?-1:1,S=n[t+v];for(v+=m,s=S&(1<<-p)-1,S>>=-p,p+=f;p>0;s=s*256+n[t+v],v+=m,p-=8);for(u=s&(1<<-p)-1,s>>=-p,p+=e;p>0;u=u*256+n[t+v],v+=m,p-=8);if(s===0)s=1-d;else{if(s===l)return u?NaN:(S?-1:1)*(1/0);u=u+Math.pow(2,e),s=s-d}return(S?-1:1)*u*Math.pow(2,s-e)};He.write=function(n,t,r,e,i,s){var u,f,l,d=s*8-i-1,p=(1<<d)-1,v=p>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=e?0:s-1,U=e?1:-1,A=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,u=p):(u=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-u))<1&&(u--,l*=2),u+v>=1?t+=m/l:t+=m*Math.pow(2,1-v),t*l>=2&&(u++,l/=2),u+v>=p?(f=0,u=p):u+v>=1?(f=(t*l-1)*Math.pow(2,i),u=u+v):(f=t*Math.pow(2,v-1)*Math.pow(2,i),u=0));i>=8;n[r+S]=f&255,S+=U,f/=256,i-=8);for(u=u<<i|f,d+=i;d>0;n[r+S]=u&255,S+=U,u/=256,d-=8);n[r+S-U]|=A*128};var qt={}.toString,jt=Array.isArray||function(n){return qt.call(n)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */(function(n){var t=Se,r=He,e=jt;n.Buffer=f,n.SlowBuffer=T,n.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=s();function i(){try{var h=new Uint8Array(1);return h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},h.foo()===42&&typeof h.subarray=="function"&&h.subarray(1,1).byteLength===0}catch{return!1}}function s(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(h,o){if(s()<o)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(h=new Uint8Array(o),h.__proto__=f.prototype):(h===null&&(h=new f(o)),h.length=o),h}function f(h,o,a){if(!f.TYPED_ARRAY_SUPPORT&&!(this instanceof f))return new f(h,o,a);if(typeof h=="number"){if(typeof o=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,h)}return l(this,h,o,a)}f.poolSize=8192,f._augment=function(h){return h.__proto__=f.prototype,h};function l(h,o,a,c){if(typeof o=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&o instanceof ArrayBuffer?U(h,o,a,c):typeof o=="string"?m(h,o,a):A(h,o)}f.from=function(h,o,a){return l(null,h,o,a)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0}));function d(h){if(typeof h!="number")throw new TypeError('"size" argument must be a number');if(h<0)throw new RangeError('"size" argument must not be negative')}function p(h,o,a,c){return d(o),o<=0?u(h,o):a!==void 0?typeof c=="string"?u(h,o).fill(a,c):u(h,o).fill(a):u(h,o)}f.alloc=function(h,o,a){return p(null,h,o,a)};function v(h,o){if(d(o),h=u(h,o<0?0:x(o)|0),!f.TYPED_ARRAY_SUPPORT)for(var a=0;a<o;++a)h[a]=0;return h}f.allocUnsafe=function(h){return v(null,h)},f.allocUnsafeSlow=function(h){return v(null,h)};function m(h,o,a){if((typeof a!="string"||a==="")&&(a="utf8"),!f.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var c=P(o,a)|0;h=u(h,c);var g=h.write(o,a);return g!==c&&(h=h.slice(0,g)),h}function S(h,o){var a=o.length<0?0:x(o.length)|0;h=u(h,a);for(var c=0;c<a;c+=1)h[c]=o[c]&255;return h}function U(h,o,a,c){if(o.byteLength,a<0||o.byteLength<a)throw new RangeError("'offset' is out of bounds");if(o.byteLength<a+(c||0))throw new RangeError("'length' is out of bounds");return a===void 0&&c===void 0?o=new Uint8Array(o):c===void 0?o=new Uint8Array(o,a):o=new Uint8Array(o,a,c),f.TYPED_ARRAY_SUPPORT?(h=o,h.__proto__=f.prototype):h=S(h,o),h}function A(h,o){if(f.isBuffer(o)){var a=x(o.length)|0;return h=u(h,a),h.length===0||o.copy(h,0,0,a),h}if(o){if(typeof ArrayBuffer<"u"&&o.buffer instanceof ArrayBuffer||"length"in o)return typeof o.length!="number"||Pt(o.length)?u(h,0):S(h,o);if(o.type==="Buffer"&&e(o.data))return S(h,o.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function x(h){if(h>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return h|0}function T(h){return+h!=h&&(h=0),f.alloc(+h)}f.isBuffer=function(o){return!!(o!=null&&o._isBuffer)},f.compare=function(o,a){if(!f.isBuffer(o)||!f.isBuffer(a))throw new TypeError("Arguments must be Buffers");if(o===a)return 0;for(var c=o.length,g=a.length,y=0,w=Math.min(c,g);y<w;++y)if(o[y]!==a[y]){c=o[y],g=a[y];break}return c<g?-1:g<c?1:0},f.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(o,a){if(!e(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return f.alloc(0);var c;if(a===void 0)for(a=0,c=0;c<o.length;++c)a+=o[c].length;var g=f.allocUnsafe(a),y=0;for(c=0;c<o.length;++c){var w=o[c];if(!f.isBuffer(w))throw new TypeError('"list" argument must be an Array of Buffers');w.copy(g,y),y+=w.length}return g};function P(h,o){if(f.isBuffer(h))return h.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(h)||h instanceof ArrayBuffer))return h.byteLength;typeof h!="string"&&(h=""+h);var a=h.length;if(a===0)return 0;for(var c=!1;;)switch(o){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return pe(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return ze(h).length;default:if(c)return pe(h).length;o=(""+o).toLowerCase(),c=!0}}f.byteLength=P;function Q(h,o,a){var c=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,o>>>=0,a<=o))return"";for(h||(h="utf8");;)switch(h){case"hex":return Et(this,o,a);case"utf8":case"utf-8":return he(this,o,a);case"ascii":return At(this,o,a);case"latin1":case"binary":return Ut(this,o,a);case"base64":return te(this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tt(this,o,a);default:if(c)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),c=!0}}f.prototype._isBuffer=!0;function k(h,o,a){var c=h[o];h[o]=h[a],h[a]=c}f.prototype.swap16=function(){var o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<o;a+=2)k(this,a,a+1);return this},f.prototype.swap32=function(){var o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<o;a+=4)k(this,a,a+3),k(this,a+1,a+2);return this},f.prototype.swap64=function(){var o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<o;a+=8)k(this,a,a+7),k(this,a+1,a+6),k(this,a+2,a+5),k(this,a+3,a+4);return this},f.prototype.toString=function(){var o=this.length|0;return o===0?"":arguments.length===0?he(this,0,o):Q.apply(this,arguments)},f.prototype.equals=function(o){if(!f.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:f.compare(this,o)===0},f.prototype.inspect=function(){var o="",a=n.INSPECT_MAX_BYTES;return this.length>0&&(o=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(o+=" ... ")),"<Buffer "+o+">"},f.prototype.compare=function(o,a,c,g,y){if(!f.isBuffer(o))throw new TypeError("Argument must be a Buffer");if(a===void 0&&(a=0),c===void 0&&(c=o?o.length:0),g===void 0&&(g=0),y===void 0&&(y=this.length),a<0||c>o.length||g<0||y>this.length)throw new RangeError("out of range index");if(g>=y&&a>=c)return 0;if(g>=y)return-1;if(a>=c)return 1;if(a>>>=0,c>>>=0,g>>>=0,y>>>=0,this===o)return 0;for(var w=y-g,E=c-a,D=Math.min(w,E),I=this.slice(g,y),B=o.slice(a,c),F=0;F<D;++F)if(I[F]!==B[F]){w=I[F],E=B[F];break}return w<E?-1:E<w?1:0};function J(h,o,a,c,g){if(h.length===0)return-1;if(typeof a=="string"?(c=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,isNaN(a)&&(a=g?0:h.length-1),a<0&&(a=h.length+a),a>=h.length){if(g)return-1;a=h.length-1}else if(a<0)if(g)a=0;else return-1;if(typeof o=="string"&&(o=f.from(o,c)),f.isBuffer(o))return o.length===0?-1:G(h,o,a,c,g);if(typeof o=="number")return o=o&255,f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(h,o,a):Uint8Array.prototype.lastIndexOf.call(h,o,a):G(h,[o],a,c,g);throw new TypeError("val must be string, number or Buffer")}function G(h,o,a,c,g){var y=1,w=h.length,E=o.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(h.length<2||o.length<2)return-1;y=2,w/=2,E/=2,a/=2}function D(Xe,Qe){return y===1?Xe[Qe]:Xe.readUInt16BE(Qe*y)}var I;if(g){var B=-1;for(I=a;I<w;I++)if(D(h,I)===D(o,B===-1?0:I-B)){if(B===-1&&(B=I),I-B+1===E)return B*y}else B!==-1&&(I-=I-B),B=-1}else for(a+E>w&&(a=w-E),I=a;I>=0;I--){for(var F=!0,me=0;me<E;me++)if(D(h,I+me)!==D(o,me)){F=!1;break}if(F)return I}return-1}f.prototype.includes=function(o,a,c){return this.indexOf(o,a,c)!==-1},f.prototype.indexOf=function(o,a,c){return J(this,o,a,c,!0)},f.prototype.lastIndexOf=function(o,a,c){return J(this,o,a,c,!1)};function ue(h,o,a,c){a=Number(a)||0;var g=h.length-a;c?(c=Number(c),c>g&&(c=g)):c=g;var y=o.length;if(y%2!==0)throw new TypeError("Invalid hex string");c>y/2&&(c=y/2);for(var w=0;w<c;++w){var E=parseInt(o.substr(w*2,2),16);if(isNaN(E))return w;h[a+w]=E}return w}function j(h,o,a,c){return ve(pe(o,h.length-a),h,a,c)}function O(h,o,a,c){return ve(Ft(o),h,a,c)}function $(h,o,a,c){return O(h,o,a,c)}function ee(h,o,a,c){return ve(ze(o),h,a,c)}function fe(h,o,a,c){return ve(Rt(o,h.length-a),h,a,c)}f.prototype.write=function(o,a,c,g){if(a===void 0)g="utf8",c=this.length,a=0;else if(c===void 0&&typeof a=="string")g=a,c=this.length,a=0;else if(isFinite(a))a=a|0,isFinite(c)?(c=c|0,g===void 0&&(g="utf8")):(g=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var y=this.length-a;if((c===void 0||c>y)&&(c=y),o.length>0&&(c<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");for(var w=!1;;)switch(g){case"hex":return ue(this,o,a,c);case"utf8":case"utf-8":return j(this,o,a,c);case"ascii":return O(this,o,a,c);case"latin1":case"binary":return $(this,o,a,c);case"base64":return ee(this,o,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,o,a,c);default:if(w)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),w=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function te(h,o,a){return o===0&&a===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(o,a))}function he(h,o,a){a=Math.min(h.length,a);for(var c=[],g=o;g<a;){var y=h[g],w=null,E=y>239?4:y>223?3:y>191?2:1;if(g+E<=a){var D,I,B,F;switch(E){case 1:y<128&&(w=y);break;case 2:D=h[g+1],(D&192)===128&&(F=(y&31)<<6|D&63,F>127&&(w=F));break;case 3:D=h[g+1],I=h[g+2],(D&192)===128&&(I&192)===128&&(F=(y&15)<<12|(D&63)<<6|I&63,F>2047&&(F<55296||F>57343)&&(w=F));break;case 4:D=h[g+1],I=h[g+2],B=h[g+3],(D&192)===128&&(I&192)===128&&(B&192)===128&&(F=(y&15)<<18|(D&63)<<12|(I&63)<<6|B&63,F>65535&&F<1114112&&(w=F))}}w===null?(w=65533,E=1):w>65535&&(w-=65536,c.push(w>>>10&1023|55296),w=56320|w&1023),c.push(w),g+=E}return Ie(c)}var Z=4096;function Ie(h){var o=h.length;if(o<=Z)return String.fromCharCode.apply(String,h);for(var a="",c=0;c<o;)a+=String.fromCharCode.apply(String,h.slice(c,c+=Z));return a}function At(h,o,a){var c="";a=Math.min(h.length,a);for(var g=o;g<a;++g)c+=String.fromCharCode(h[g]&127);return c}function Ut(h,o,a){var c="";a=Math.min(h.length,a);for(var g=o;g<a;++g)c+=String.fromCharCode(h[g]);return c}function Et(h,o,a){var c=h.length;(!o||o<0)&&(o=0),(!a||a<0||a>c)&&(a=c);for(var g="",y=o;y<a;++y)g+=It(h[y]);return g}function Tt(h,o,a){for(var c=h.slice(o,a),g="",y=0;y<c.length;y+=2)g+=String.fromCharCode(c[y]+c[y+1]*256);return g}f.prototype.slice=function(o,a){var c=this.length;o=~~o,a=a===void 0?c:~~a,o<0?(o+=c,o<0&&(o=0)):o>c&&(o=c),a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),a<o&&(a=o);var g;if(f.TYPED_ARRAY_SUPPORT)g=this.subarray(o,a),g.__proto__=f.prototype;else{var y=a-o;g=new f(y,void 0);for(var w=0;w<y;++w)g[w]=this[w+o]}return g};function R(h,o,a){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+o>a)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function(o,a,c){o=o|0,a=a|0,c||R(o,a,this.length);for(var g=this[o],y=1,w=0;++w<a&&(y*=256);)g+=this[o+w]*y;return g},f.prototype.readUIntBE=function(o,a,c){o=o|0,a=a|0,c||R(o,a,this.length);for(var g=this[o+--a],y=1;a>0&&(y*=256);)g+=this[o+--a]*y;return g},f.prototype.readUInt8=function(o,a){return a||R(o,1,this.length),this[o]},f.prototype.readUInt16LE=function(o,a){return a||R(o,2,this.length),this[o]|this[o+1]<<8},f.prototype.readUInt16BE=function(o,a){return a||R(o,2,this.length),this[o]<<8|this[o+1]},f.prototype.readUInt32LE=function(o,a){return a||R(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},f.prototype.readUInt32BE=function(o,a){return a||R(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},f.prototype.readIntLE=function(o,a,c){o=o|0,a=a|0,c||R(o,a,this.length);for(var g=this[o],y=1,w=0;++w<a&&(y*=256);)g+=this[o+w]*y;return y*=128,g>=y&&(g-=Math.pow(2,8*a)),g},f.prototype.readIntBE=function(o,a,c){o=o|0,a=a|0,c||R(o,a,this.length);for(var g=a,y=1,w=this[o+--g];g>0&&(y*=256);)w+=this[o+--g]*y;return y*=128,w>=y&&(w-=Math.pow(2,8*a)),w},f.prototype.readInt8=function(o,a){return a||R(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},f.prototype.readInt16LE=function(o,a){a||R(o,2,this.length);var c=this[o]|this[o+1]<<8;return c&32768?c|4294901760:c},f.prototype.readInt16BE=function(o,a){a||R(o,2,this.length);var c=this[o+1]|this[o]<<8;return c&32768?c|4294901760:c},f.prototype.readInt32LE=function(o,a){return a||R(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},f.prototype.readInt32BE=function(o,a){return a||R(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},f.prototype.readFloatLE=function(o,a){return a||R(o,4,this.length),r.read(this,o,!0,23,4)},f.prototype.readFloatBE=function(o,a){return a||R(o,4,this.length),r.read(this,o,!1,23,4)},f.prototype.readDoubleLE=function(o,a){return a||R(o,8,this.length),r.read(this,o,!0,52,8)},f.prototype.readDoubleBE=function(o,a){return a||R(o,8,this.length),r.read(this,o,!1,52,8)};function M(h,o,a,c,g,y){if(!f.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>g||o<y)throw new RangeError('"value" argument is out of bounds');if(a+c>h.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function(o,a,c,g){if(o=+o,a=a|0,c=c|0,!g){var y=Math.pow(2,8*c)-1;M(this,o,a,c,y,0)}var w=1,E=0;for(this[a]=o&255;++E<c&&(w*=256);)this[a+E]=o/w&255;return a+c},f.prototype.writeUIntBE=function(o,a,c,g){if(o=+o,a=a|0,c=c|0,!g){var y=Math.pow(2,8*c)-1;M(this,o,a,c,y,0)}var w=c-1,E=1;for(this[a+w]=o&255;--w>=0&&(E*=256);)this[a+w]=o/E&255;return a+c},f.prototype.writeUInt8=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,1,255,0),f.TYPED_ARRAY_SUPPORT||(o=Math.floor(o)),this[a]=o&255,a+1};function de(h,o,a,c){o<0&&(o=65535+o+1);for(var g=0,y=Math.min(h.length-a,2);g<y;++g)h[a+g]=(o&255<<8*(c?g:1-g))>>>(c?g:1-g)*8}f.prototype.writeUInt16LE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[a]=o&255,this[a+1]=o>>>8):de(this,o,a,!0),a+2},f.prototype.writeUInt16BE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[a]=o>>>8,this[a+1]=o&255):de(this,o,a,!1),a+2};function ge(h,o,a,c){o<0&&(o=4294967295+o+1);for(var g=0,y=Math.min(h.length-a,4);g<y;++g)h[a+g]=o>>>(c?g:3-g)*8&255}f.prototype.writeUInt32LE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[a+3]=o>>>24,this[a+2]=o>>>16,this[a+1]=o>>>8,this[a]=o&255):ge(this,o,a,!0),a+4},f.prototype.writeUInt32BE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[a]=o>>>24,this[a+1]=o>>>16,this[a+2]=o>>>8,this[a+3]=o&255):ge(this,o,a,!1),a+4},f.prototype.writeIntLE=function(o,a,c,g){if(o=+o,a=a|0,!g){var y=Math.pow(2,8*c-1);M(this,o,a,c,y-1,-y)}var w=0,E=1,D=0;for(this[a]=o&255;++w<c&&(E*=256);)o<0&&D===0&&this[a+w-1]!==0&&(D=1),this[a+w]=(o/E>>0)-D&255;return a+c},f.prototype.writeIntBE=function(o,a,c,g){if(o=+o,a=a|0,!g){var y=Math.pow(2,8*c-1);M(this,o,a,c,y-1,-y)}var w=c-1,E=1,D=0;for(this[a+w]=o&255;--w>=0&&(E*=256);)o<0&&D===0&&this[a+w+1]!==0&&(D=1),this[a+w]=(o/E>>0)-D&255;return a+c},f.prototype.writeInt8=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,1,127,-128),f.TYPED_ARRAY_SUPPORT||(o=Math.floor(o)),o<0&&(o=255+o+1),this[a]=o&255,a+1},f.prototype.writeInt16LE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[a]=o&255,this[a+1]=o>>>8):de(this,o,a,!0),a+2},f.prototype.writeInt16BE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[a]=o>>>8,this[a+1]=o&255):de(this,o,a,!1),a+2},f.prototype.writeInt32LE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[a]=o&255,this[a+1]=o>>>8,this[a+2]=o>>>16,this[a+3]=o>>>24):ge(this,o,a,!0),a+4},f.prototype.writeInt32BE=function(o,a,c){return o=+o,a=a|0,c||M(this,o,a,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),f.TYPED_ARRAY_SUPPORT?(this[a]=o>>>24,this[a+1]=o>>>16,this[a+2]=o>>>8,this[a+3]=o&255):ge(this,o,a,!1),a+4};function Ge(h,o,a,c,g,y){if(a+c>h.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function $e(h,o,a,c,g){return g||Ge(h,o,a,4),r.write(h,o,a,c,23,4),a+4}f.prototype.writeFloatLE=function(o,a,c){return $e(this,o,a,!0,c)},f.prototype.writeFloatBE=function(o,a,c){return $e(this,o,a,!1,c)};function Ze(h,o,a,c,g){return g||Ge(h,o,a,8),r.write(h,o,a,c,52,8),a+8}f.prototype.writeDoubleLE=function(o,a,c){return Ze(this,o,a,!0,c)},f.prototype.writeDoubleBE=function(o,a,c){return Ze(this,o,a,!1,c)},f.prototype.copy=function(o,a,c,g){if(c||(c=0),!g&&g!==0&&(g=this.length),a>=o.length&&(a=o.length),a||(a=0),g>0&&g<c&&(g=c),g===c||o.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),o.length-a<g-c&&(g=o.length-a+c);var y=g-c,w;if(this===o&&c<a&&a<g)for(w=y-1;w>=0;--w)o[w+a]=this[w+c];else if(y<1e3||!f.TYPED_ARRAY_SUPPORT)for(w=0;w<y;++w)o[w+a]=this[w+c];else Uint8Array.prototype.set.call(o,this.subarray(c,c+y),a);return y},f.prototype.fill=function(o,a,c,g){if(typeof o=="string"){if(typeof a=="string"?(g=a,a=0,c=this.length):typeof c=="string"&&(g=c,c=this.length),o.length===1){var y=o.charCodeAt(0);y<256&&(o=y)}if(g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!f.isEncoding(g))throw new TypeError("Unknown encoding: "+g)}else typeof o=="number"&&(o=o&255);if(a<0||this.length<a||this.length<c)throw new RangeError("Out of range index");if(c<=a)return this;a=a>>>0,c=c===void 0?this.length:c>>>0,o||(o=0);var w;if(typeof o=="number")for(w=a;w<c;++w)this[w]=o;else{var E=f.isBuffer(o)?o:pe(new f(o,g).toString()),D=E.length;for(w=0;w<c-a;++w)this[w+a]=E[w%D]}return this};var xt=/[^+\/0-9A-Za-z-_]/g;function Dt(h){if(h=_t(h).replace(xt,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function _t(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function It(h){return h<16?"0"+h.toString(16):h.toString(16)}function pe(h,o){o=o||1/0;for(var a,c=h.length,g=null,y=[],w=0;w<c;++w){if(a=h.charCodeAt(w),a>55295&&a<57344){if(!g){if(a>56319){(o-=3)>-1&&y.push(239,191,189);continue}else if(w+1===c){(o-=3)>-1&&y.push(239,191,189);continue}g=a;continue}if(a<56320){(o-=3)>-1&&y.push(239,191,189),g=a;continue}a=(g-55296<<10|a-56320)+65536}else g&&(o-=3)>-1&&y.push(239,191,189);if(g=null,a<128){if((o-=1)<0)break;y.push(a)}else if(a<2048){if((o-=2)<0)break;y.push(a>>6|192,a&63|128)}else if(a<65536){if((o-=3)<0)break;y.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((o-=4)<0)break;y.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return y}function Ft(h){for(var o=[],a=0;a<h.length;++a)o.push(h.charCodeAt(a)&255);return o}function Rt(h,o){for(var a,c,g,y=[],w=0;w<h.length&&!((o-=2)<0);++w)a=h.charCodeAt(w),c=a>>8,g=a%256,y.push(g),y.push(c);return y}function ze(h){return t.toByteArray(Dt(h))}function ve(h,o,a,c){for(var g=0;g<c&&!(g+a>=o.length||g>=h.length);++g)o[g+a]=h[g];return g}function Pt(h){return h!==h}})(_);var L;typeof window<"u"&&window.crypto&&(L=window.crypto);!L&&typeof window<"u"&&window.msCrypto&&(L=window.msCrypto);!L&&typeof globalThis<"u"&&globalThis.crypto&&(L=globalThis.crypto);if(!L&&typeof require=="function")try{L=require("crypto")}catch{}function Ht(){if(L){if(typeof L.getRandomValues=="function")try{return L.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof L.randomBytes=="function")try{return L.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function Yt(n){for(var t=n.words,r=n.sigBytes,e=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;e.push((s>>>4).toString(16)),e.push((s&15).toString(16))}return e.join("")}var Wt=function(){function n(r,e){r=this.words=r||[],e!=null?this.sigBytes=e:this.sigBytes=r.length*4}var t=n.prototype;return t.random=function(e){for(var i=[],s=0;s<e;s+=4)i.push(Ht());return new n(i,e)},t.toString=function(){return Yt(this)},n}(),se={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Be=function(n,t){return Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i])},Be(n,t)};function Jt(n,t){Be(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var be=function(){return be=Object.assign||function(t){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},be.apply(this,arguments)};function Gt(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(n);i<e.length;i++)t.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(n,e[i])&&(r[e[i]]=n[e[i]]);return r}function $t(n,t,r,e){var i=arguments.length,s=i<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,r):e,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,e);else for(var f=n.length-1;f>=0;f--)(u=n[f])&&(s=(i<3?u(s):i>3?u(t,r,s):u(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function Zt(n,t){return function(r,e){t(r,e,n)}}function zt(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function Xt(n,t,r,e){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function f(p){try{d(e.next(p))}catch(v){u(v)}}function l(p){try{d(e.throw(p))}catch(v){u(v)}}function d(p){p.done?s(p.value):i(p.value).then(f,l)}d((e=e.apply(n,t||[])).next())})}function Qt(n,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(p){return l([d,p])}}function l(d){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(n,r)}catch(p){d=[6,p],i=0}finally{e=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function er(n,t,r,e){e===void 0&&(e=r),n[e]=t[r]}function tr(n,t){for(var r in n)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=n[r])}function Me(n){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&n[t],e=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(n,t){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var e=r.call(n),i,s=[],u;try{for(;(t===void 0||t-- >0)&&!(i=e.next()).done;)s.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=e.return)&&r.call(e)}finally{if(u)throw u.error}}return s}function rr(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(lt(arguments[t]));return n}function nr(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;for(var e=Array(n),i=0,t=0;t<r;t++)for(var s=arguments[t],u=0,f=s.length;u<f;u++,i++)e[i]=s[u];return e}function ce(n){return this instanceof ce?(this.v=n,this):new ce(n)}function ir(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(n,t||[]),i,s=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(m){e[m]&&(i[m]=function(S){return new Promise(function(U,A){s.push([m,S,U,A])>1||f(m,S)})})}function f(m,S){try{l(e[m](S))}catch(U){v(s[0][3],U)}}function l(m){m.value instanceof ce?Promise.resolve(m.value.v).then(d,p):v(s[0][2],m)}function d(m){f("next",m)}function p(m){f("throw",m)}function v(m,S){m(S),s.shift(),s.length&&f(s[0][0],s[0][1])}}function sr(n){var t,r;return t={},e("next"),e("throw",function(i){throw i}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(i,s){t[i]=n[i]?function(u){return(r=!r)?{value:ce(n[i](u)),done:i==="return"}:s?s(u):u}:s}}function or(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],r;return t?t.call(n):(n=typeof Me=="function"?Me(n):n[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(s){r[s]=n[s]&&function(u){return new Promise(function(f,l){u=n[s](u),i(f,l,u.done,u.value)})}}function i(s,u,f,l){Promise.resolve(l).then(function(d){s({value:d,done:f})},u)}}function ar(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function ur(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var r in n)Object.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.default=n,t}function fr(n){return n&&n.__esModule?n:{default:n}}function hr(n,t){if(!t.has(n))throw new TypeError("attempted to get private field on non-instance");return t.get(n)}function cr(n,t,r){if(!t.has(n))throw new TypeError("attempted to set private field on non-instance");return t.set(n,r),r}const lr=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return be},__asyncDelegator:sr,__asyncGenerator:ir,__asyncValues:or,__await:ce,__awaiter:Xt,__classPrivateFieldGet:hr,__classPrivateFieldSet:cr,__createBinding:er,__decorate:$t,__exportStar:tr,__extends:Jt,__generator:Qt,__importDefault:fr,__importStar:ur,__makeTemplateObject:ar,__metadata:zt,__param:Zt,__read:lt,__rest:Gt,__spread:rr,__spreadArrays:nr,__values:Me},Symbol.toStringTag,{value:"Module"})),dt=je(lr);var Ce={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.MAX_HASHABLE_LENGTH=N.INIT=N.KEY=N.DIGEST_LENGTH=N.BLOCK_SIZE=void 0;N.BLOCK_SIZE=64;N.DIGEST_LENGTH=32;N.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);N.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];N.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.RawSha256=void 0;var K=N,dr=function(){function n(){this.state=Int32Array.from(K.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,e=t.byteLength;if(this.bytesHashed+=e,this.bytesHashed*8>K.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;e>0;)this.buffer[this.bufferLength++]=t[r++],e--,this.bufferLength===K.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),e=this.bufferLength;if(r.setUint8(this.bufferLength++,128),e%K.BLOCK_SIZE>=K.BLOCK_SIZE-8){for(var i=this.bufferLength;i<K.BLOCK_SIZE;i++)r.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<K.BLOCK_SIZE-8;i++)r.setUint8(i,0);r.setUint32(K.BLOCK_SIZE-8,Math.floor(t/4294967296),!0),r.setUint32(K.BLOCK_SIZE-4,t),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(K.DIGEST_LENGTH),i=0;i<8;i++)s[i*4]=this.state[i]>>>24&255,s[i*4+1]=this.state[i]>>>16&255,s[i*4+2]=this.state[i]>>>8&255,s[i*4+3]=this.state[i]>>>0&255;return s},n.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,e=t.state,i=e[0],s=e[1],u=e[2],f=e[3],l=e[4],d=e[5],p=e[6],v=e[7],m=0;m<K.BLOCK_SIZE;m++){if(m<16)this.temp[m]=(r[m*4]&255)<<24|(r[m*4+1]&255)<<16|(r[m*4+2]&255)<<8|r[m*4+3]&255;else{var S=this.temp[m-2],U=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10;S=this.temp[m-15];var A=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3;this.temp[m]=(U+this.temp[m-7]|0)+(A+this.temp[m-16]|0)}var x=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&d^~l&p)|0)+(v+(K.KEY[m]+this.temp[m]|0)|0)|0,T=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&s^i&u^s&u)|0;v=p,p=d,d=l,l=f+x|0,f=u,u=s,s=i,i=x+T|0}e[0]+=i,e[1]+=s,e[2]+=u,e[3]+=f,e[4]+=l,e[5]+=d,e[6]+=p,e[7]+=v},n}();Ae.RawSha256=dr;var gt={},Ue={};const gr=n=>{const t=[];for(let r=0,e=n.length;r<e;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,i&63|128);else if(r+1<n.length&&(i&64512)===55296&&(n.charCodeAt(r+1)&64512)===56320){const s=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(t)},pr=n=>{let t="";for(let r=0,e=n.length;r<e;r++){const i=n[r];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const s=n[++r];t+=String.fromCharCode((i&31)<<6|s&63)}else if(240<=i&&i<365){const u="%"+[i,n[++r],n[++r],n[++r]].map(f=>f.toString(16)).join("%");t+=decodeURIComponent(u)}else t+=String.fromCharCode((i&15)<<12|(n[++r]&63)<<6|n[++r]&63)}return t};function vr(n){return new TextEncoder().encode(n)}function mr(n){return new TextDecoder("utf-8").decode(n)}const yr=n=>typeof TextEncoder=="function"?vr(n):gr(n),wr=n=>typeof TextDecoder=="function"?mr(n):pr(n),Sr=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:yr,toUtf8:wr},Symbol.toStringTag,{value:"Module"})),Cr=je(Sr);Object.defineProperty(Ue,"__esModule",{value:!0});Ue.convertToBuffer=void 0;var Ar=Cr,Ur=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:Ar.fromUtf8;function Er(n){return n instanceof Uint8Array?n:typeof n=="string"?Ur(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}Ue.convertToBuffer=Er;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.isEmptyData=void 0;function Tr(n){return typeof n=="string"?n.length===0:n.byteLength===0}Ee.isEmptyData=Tr;var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.numToUint8=void 0;function xr(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}Te.numToUint8=xr;var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.uint32ArrayFrom=void 0;function Dr(n){if(!Array.from){for(var t=new Uint32Array(n.length),r=0;r<n.length;)t[r]=n[r];return t}return Uint32Array.from(n)}xe.uint32ArrayFrom=Dr;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.uint32ArrayFrom=n.numToUint8=n.isEmptyData=n.convertToBuffer=void 0;var t=Ue;Object.defineProperty(n,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=Ee;Object.defineProperty(n,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var e=Te;Object.defineProperty(n,"numToUint8",{enumerable:!0,get:function(){return e.numToUint8}});var i=xe;Object.defineProperty(n,"uint32ArrayFrom",{enumerable:!0,get:function(){return i.uint32ArrayFrom}})})(gt);Object.defineProperty(Ce,"__esModule",{value:!0});Ce.Sha256=void 0;var et=dt,we=N,Oe=Ae,Ne=gt,_r=function(){function n(t){if(this.hash=new Oe.RawSha256,t){this.outer=new Oe.RawSha256;var r=Ir(t),e=new Uint8Array(we.BLOCK_SIZE);e.set(r);for(var i=0;i<we.BLOCK_SIZE;i++)r[i]^=54,e[i]^=92;this.hash.update(r),this.outer.update(e);for(var i=0;i<r.byteLength;i++)r[i]=0}}return n.prototype.update=function(t){if(!((0,Ne.isEmptyData)(t)||this.error))try{this.hash.update((0,Ne.convertToBuffer)(t))}catch(r){this.error=r}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(t){return[2,this.digestSync()]})})},n}();Ce.Sha256=_r;function Ir(n){var t=(0,Ne.convertToBuffer)(n);if(t.byteLength>we.BLOCK_SIZE){var r=new Oe.RawSha256;r.update(t),t=r.digest()}var e=new Uint8Array(we.BLOCK_SIZE);return e.set(t),e}(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=dt;(0,t.__exportStar)(Ce,n)})(se);function C(n,t){n!=null&&this.fromString(n,t)}function b(){return new C(null)}var Y,Fr=0xdeadbeefcafe,tt=(Fr&16777215)==15715070;function Rr(n,t,r,e,i,s){for(;--s>=0;){var u=t*this[n++]+r[e]+i;i=Math.floor(u/67108864),r[e++]=u&67108863}return i}function Pr(n,t,r,e,i,s){for(var u=t&32767,f=t>>15;--s>=0;){var l=this[n]&32767,d=this[n++]>>15,p=f*l+d*u;l=u*l+((p&32767)<<15)+r[e]+(i&1073741823),i=(l>>>30)+(p>>>15)+f*d+(i>>>30),r[e++]=l&1073741823}return i}function Br(n,t,r,e,i,s){for(var u=t&16383,f=t>>14;--s>=0;){var l=this[n]&16383,d=this[n++]>>14,p=f*l+d*u;l=u*l+((p&16383)<<14)+r[e]+i,i=(l>>28)+(p>>14)+f*d,r[e++]=l&268435455}return i}var rt=typeof navigator<"u";rt&&tt&&navigator.appName=="Microsoft Internet Explorer"?(C.prototype.am=Pr,Y=30):rt&&tt&&navigator.appName!="Netscape"?(C.prototype.am=Rr,Y=26):(C.prototype.am=Br,Y=28);C.prototype.DB=Y;C.prototype.DM=(1<<Y)-1;C.prototype.DV=1<<Y;var Ye=52;C.prototype.FV=Math.pow(2,Ye);C.prototype.F1=Ye-Y;C.prototype.F2=2*Y-Ye;var br="0123456789abcdefghijklmnopqrstuvwxyz",De=new Array,oe,q;oe="0".charCodeAt(0);for(q=0;q<=9;++q)De[oe++]=q;oe="a".charCodeAt(0);for(q=10;q<36;++q)De[oe++]=q;oe="A".charCodeAt(0);for(q=10;q<36;++q)De[oe++]=q;function nt(n){return br.charAt(n)}function Mr(n,t){var r=De[n.charCodeAt(t)];return r??-1}function Or(n){for(var t=this.t-1;t>=0;--t)n[t]=this[t];n.t=this.t,n.s=this.s}function Nr(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}function We(n){var t=b();return t.fromInt(n),t}function kr(n,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var e=n.length,i=!1,s=0;--e>=0;){var u=Mr(n,e);if(u<0){n.charAt(e)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=u:s+r>this.DB?(this[this.t-1]|=(u&(1<<this.DB-s)-1)<<s,this[this.t++]=u>>this.DB-s):this[this.t-1]|=u<<s,s+=r,s>=this.DB&&(s-=this.DB)}this.clamp(),i&&C.ZERO.subTo(this,this)}function Kr(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}function Vr(n){if(this.s<0)return"-"+this.negate().toString(n);var t;if(n==16)t=4;else if(n==8)t=3;else if(n==2)t=1;else if(n==32)t=5;else if(n==4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var r=(1<<t)-1,e,i=!1,s="",u=this.t,f=this.DB-u*this.DB%t;if(u-- >0)for(f<this.DB&&(e=this[u]>>f)>0&&(i=!0,s=nt(e));u>=0;)f<t?(e=(this[u]&(1<<f)-1)<<t-f,e|=this[--u]>>(f+=this.DB-t)):(e=this[u]>>(f-=t)&r,f<=0&&(f+=this.DB,--u)),e>0&&(i=!0),i&&(s+=nt(e));return i?s:"0"}function Lr(){var n=b();return C.ZERO.subTo(this,n),n}function qr(){return this.s<0?this.negate():this}function jr(n){var t=this.s-n.s;if(t!=0)return t;var r=this.t;if(t=r-n.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-n[r])!=0)return t;return 0}function Je(n){var t=1,r;return(r=n>>>16)!=0&&(n=r,t+=16),(r=n>>8)!=0&&(n=r,t+=8),(r=n>>4)!=0&&(n=r,t+=4),(r=n>>2)!=0&&(n=r,t+=2),(r=n>>1)!=0&&(n=r,t+=1),t}function Hr(){return this.t<=0?0:this.DB*(this.t-1)+Je(this[this.t-1]^this.s&this.DM)}function Yr(n,t){var r;for(r=this.t-1;r>=0;--r)t[r+n]=this[r];for(r=n-1;r>=0;--r)t[r]=0;t.t=this.t+n,t.s=this.s}function Wr(n,t){for(var r=n;r<this.t;++r)t[r-n]=this[r];t.t=Math.max(this.t-n,0),t.s=this.s}function Jr(n,t){var r=n%this.DB,e=this.DB-r,i=(1<<e)-1,s=Math.floor(n/this.DB),u=this.s<<r&this.DM,f;for(f=this.t-1;f>=0;--f)t[f+s+1]=this[f]>>e|u,u=(this[f]&i)<<r;for(f=s-1;f>=0;--f)t[f]=0;t[s]=u,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Gr(n,t){t.s=this.s;var r=Math.floor(n/this.DB);if(r>=this.t){t.t=0;return}var e=n%this.DB,i=this.DB-e,s=(1<<e)-1;t[0]=this[r]>>e;for(var u=r+1;u<this.t;++u)t[u-r-1]|=(this[u]&s)<<i,t[u-r]=this[u]>>e;e>0&&(t[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function $r(n,t){for(var r=0,e=0,i=Math.min(n.t,this.t);r<i;)e+=this[r]-n[r],t[r++]=e&this.DM,e>>=this.DB;if(n.t<this.t){for(e-=n.s;r<this.t;)e+=this[r],t[r++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;r<n.t;)e-=n[r],t[r++]=e&this.DM,e>>=this.DB;e-=n.s}t.s=e<0?-1:0,e<-1?t[r++]=this.DV+e:e>0&&(t[r++]=e),t.t=r,t.clamp()}function Zr(n,t){var r=this.abs(),e=n.abs(),i=r.t;for(t.t=i+e.t;--i>=0;)t[i]=0;for(i=0;i<e.t;++i)t[i+r.t]=r.am(0,e[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=n.s&&C.ZERO.subTo(t,t)}function zr(n){for(var t=this.abs(),r=n.t=2*t.t;--r>=0;)n[r]=0;for(r=0;r<t.t-1;++r){var e=t.am(r,t[r],n,2*r,0,1);(n[r+t.t]+=t.am(r+1,2*t[r],n,2*r+1,e,t.t-r-1))>=t.DV&&(n[r+t.t]-=t.DV,n[r+t.t+1]=1)}n.t>0&&(n[n.t-1]+=t.am(r,t[r],n,2*r,0,1)),n.s=0,n.clamp()}function Xr(n,t,r){var e=n.abs();if(!(e.t<=0)){var i=this.abs();if(i.t<e.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=b());var s=b(),u=this.s,f=n.s,l=this.DB-Je(e[e.t-1]);l>0?(e.lShiftTo(l,s),i.lShiftTo(l,r)):(e.copyTo(s),i.copyTo(r));var d=s.t,p=s[d-1];if(p!=0){var v=p*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),m=this.FV/v,S=(1<<this.F1)/v,U=1<<this.F2,A=r.t,x=A-d,T=t??b();for(s.dlShiftTo(x,T),r.compareTo(T)>=0&&(r[r.t++]=1,r.subTo(T,r)),C.ONE.dlShiftTo(d,T),T.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--x>=0;){var P=r[--A]==p?this.DM:Math.floor(r[A]*m+(r[A-1]+U)*S);if((r[A]+=s.am(0,P,r,x,0,d))<P)for(s.dlShiftTo(x,T),r.subTo(T,r);r[A]<--P;)r.subTo(T,r)}t!=null&&(r.drShiftTo(d,t),u!=f&&C.ZERO.subTo(t,t)),r.t=d,r.clamp(),l>0&&r.rShiftTo(l,r),u<0&&C.ZERO.subTo(r,r)}}}function Qr(n){var t=b();return this.abs().divRemTo(n,null,t),this.s<0&&t.compareTo(C.ZERO)>0&&n.subTo(t,t),t}function en(){if(this.t<1)return 0;var n=this[0];if(!(n&1))return 0;var t=n&3;return t=t*(2-(n&15)*t)&15,t=t*(2-(n&255)*t)&255,t=t*(2-((n&65535)*t&65535))&65535,t=t*(2-n*t%this.DV)%this.DV,t>0?this.DV-t:-t}function tn(n){return this.compareTo(n)==0}function rn(n,t){for(var r=0,e=0,i=Math.min(n.t,this.t);r<i;)e+=this[r]+n[r],t[r++]=e&this.DM,e>>=this.DB;if(n.t<this.t){for(e+=n.s;r<this.t;)e+=this[r],t[r++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;r<n.t;)e+=n[r],t[r++]=e&this.DM,e>>=this.DB;e+=n.s}t.s=e<0?-1:0,e>0?t[r++]=e:e<-1&&(t[r++]=this.DV+e),t.t=r,t.clamp()}function nn(n){var t=b();return this.addTo(n,t),t}function sn(n){var t=b();return this.subTo(n,t),t}function on(n){var t=b();return this.multiplyTo(n,t),t}function an(n){var t=b();return this.divRemTo(n,t,null),t}function ae(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}function un(n){var t=b();return n.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),n.s<0&&t.compareTo(C.ZERO)>0&&this.m.subTo(t,t),t}function fn(n){var t=b();return n.copyTo(t),this.reduce(t),t}function hn(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var t=0;t<this.m.t;++t){var r=n[t]&32767,e=r*this.mpl+((r*this.mph+(n[t]>>15)*this.mpl&this.um)<<15)&n.DM;for(r=t+this.m.t,n[r]+=this.m.am(0,e,n,t,0,this.m.t);n[r]>=n.DV;)n[r]-=n.DV,n[++r]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function cn(n,t){n.squareTo(t),this.reduce(t)}function ln(n,t,r){n.multiplyTo(t,r),this.reduce(r)}ae.prototype.convert=un;ae.prototype.revert=fn;ae.prototype.reduce=hn;ae.prototype.mulTo=ln;ae.prototype.sqrTo=cn;function dn(n,t,r){var e=n.bitLength(),i,s=We(1),u=new ae(t);if(e<=0)return s;e<18?i=1:e<48?i=3:e<144?i=4:e<768?i=5:i=6;var f=new Array,l=3,d=i-1,p=(1<<i)-1;if(f[1]=u.convert(this),i>1){var v=b();for(u.sqrTo(f[1],v);l<=p;)f[l]=b(),u.mulTo(v,f[l-2],f[l]),l+=2}var m=n.t-1,S,U=!0,A=b(),x;for(e=Je(n[m])-1;m>=0;){for(e>=d?S=n[m]>>e-d&p:(S=(n[m]&(1<<e+1)-1)<<d-e,m>0&&(S|=n[m-1]>>this.DB+e-d)),l=i;!(S&1);)S>>=1,--l;if((e-=l)<0&&(e+=this.DB,--m),U)f[S].copyTo(s),U=!1;else{for(;l>1;)u.sqrTo(s,A),u.sqrTo(A,s),l-=2;l>0?u.sqrTo(s,A):(x=s,s=A,A=x),u.mulTo(A,f[S],s)}for(;m>=0&&!(n[m]&1<<e);)u.sqrTo(s,A),x=s,s=A,A=x,--e<0&&(e=this.DB-1,--m)}var T=u.revert(s);return r(null,T),T}C.prototype.copyTo=Or;C.prototype.fromInt=Nr;C.prototype.fromString=kr;C.prototype.clamp=Kr;C.prototype.dlShiftTo=Yr;C.prototype.drShiftTo=Wr;C.prototype.lShiftTo=Jr;C.prototype.rShiftTo=Gr;C.prototype.subTo=$r;C.prototype.multiplyTo=Zr;C.prototype.squareTo=zr;C.prototype.divRemTo=Xr;C.prototype.invDigit=en;C.prototype.addTo=rn;C.prototype.toString=Vr;C.prototype.negate=Lr;C.prototype.abs=qr;C.prototype.compareTo=jr;C.prototype.bitLength=Hr;C.prototype.mod=Qr;C.prototype.equals=tn;C.prototype.add=nn;C.prototype.subtract=sn;C.prototype.multiply=on;C.prototype.divide=an;C.prototype.modPow=dn;C.ZERO=We(0);C.ONE=We(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Re(n){return _.Buffer.from(new Wt().random(n).toString(),"hex")}var gn=/^[89a-f]/i,pn="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",vn="userAttributes.",ne=function(){function n(r){this.N=new C(pn,16),this.g=new C("2",16),this.k=new C(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=_.Buffer.from("Caldera Derived Key","utf8"),this.poolName=r}var t=n.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var i=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(s,u){s&&e(s,null),i.largeAValue=u,e(null,i.largeAValue)})},t.generateRandomSmallA=function(){var e=Re(128).toString("hex"),i=new C(e,16);return i},t.generateRandomString=function(){return Re(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,i,s){var u=this;this.randomPassword=this.generateRandomString();var f=""+e+i+":"+this.randomPassword,l=this.hash(f),d=Re(16).toString("hex");this.SaltToHashDevices=this.padHex(new C(d,16)),this.g.modPow(new C(this.hexHash(this.SaltToHashDevices+l),16),this.N,function(p,v){p&&s(p,null),u.verifierDevices=u.padHex(v),s(null,null)})},t.calculateA=function(e,i){var s=this;this.g.modPow(e,this.N,function(u,f){u&&i(u,null),f.mod(s.N).equals(C.ZERO)&&i(new Error("Illegal paramater. A mod N cannot be 0."),null),i(null,f)})},t.calculateU=function(e,i){this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(i));var s=new C(this.UHexHash,16);return s},t.hash=function(e){var i=new se.Sha256;i.update(e);var s=i.digestSync(),u=_.Buffer.from(s).toString("hex");return new Array(64-u.length).join("0")+u},t.hexHash=function(e){return this.hash(_.Buffer.from(e,"hex"))},t.computehkdf=function(e,i){var s=_.Buffer.concat([this.infoBits,_.Buffer.from(String.fromCharCode(1),"utf8")]),u=new se.Sha256(i);u.update(e);var f=u.digestSync(),l=new se.Sha256(f);l.update(s);var d=l.digestSync(),p=d,v=p.slice(0,16);return v},t.getPasswordAuthenticationKey=function(e,i,s,u,f){var l=this;if(s.mod(this.N).equals(C.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,s),this.UValue.equals(C.ZERO))throw new Error("U cannot be zero.");var d=""+this.poolName+e+":"+i,p=this.hash(d),v=new C(this.hexHash(this.padHex(u)+p),16);this.calculateS(v,s,function(m,S){m&&f(m,null);var U=l.computehkdf(_.Buffer.from(l.padHex(S),"hex"),_.Buffer.from(l.padHex(l.UValue),"hex"));f(null,U)})},t.calculateS=function(e,i,s){var u=this;this.g.modPow(e,this.N,function(f,l){f&&s(f,null);var d=i.subtract(u.k.multiply(l));d.modPow(u.smallAValue.add(u.UValue.multiply(e)),u.N,function(p,v){p&&s(p,null),s(null,v.mod(u.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return vn},t.padHex=function(e){if(!(e instanceof C))throw new Error("Not a BigInteger");var i=e.compareTo(C.ZERO)<0,s=e.abs().toString(16);if(s=s.length%2!==0?"0"+s:s,s=gn.test(s)?"00"+s:s,i){var u=s.split("").map(function(l){var d=~parseInt(l,16)&15;return"0123456789ABCDEF".charAt(d)}).join(""),f=new C(u,16).add(C.ONE);s=f.toString(16),s.toUpperCase().startsWith("FF8")&&(s=s.substring(2))}return s},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var pt=function(){function n(r){this.jwtToken=r||"",this.payload=this.decodePayload()}var t=n.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(_.Buffer.from(e,"base64").toString("utf8"))}catch{return{}}},n}();function mn(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,ke(n,t)}function ke(n,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},ke(n,t)}var it=function(n){function t(r){var e=r===void 0?{}:r,i=e.AccessToken;return n.call(this,i||"")||this}return mn(t,n),t}(pt);function yn(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Ke(n,t)}function Ke(n,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},Ke(n,t)}var st=function(n){function t(r){var e=r===void 0?{}:r,i=e.IdToken;return n.call(this,i||"")||this}return yn(t,n),t}(pt);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var ot=function(){function n(r){var e=r===void 0?{}:r,i=e.RefreshToken;this.token=i||""}var t=n.prototype;return t.getToken=function(){return this.token},n}(),wn="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Sn="aws-amplify/"+wn,vt={userAgent:Sn,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},Cn=function(){return vt.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var at=function(){function n(r){var e=r===void 0?{}:r,i=e.IdToken,s=e.RefreshToken,u=e.AccessToken,f=e.ClockDrift;if(u==null||i==null)throw new Error("Id token and Access Token must be present.");this.idToken=i,this.refreshToken=s,this.accessToken=u,this.clockDrift=f===void 0?this.calculateClockDrift():f}var t=n.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){var e=Math.floor(new Date/1e3),i=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return e-i},t.isValid=function(){var e=Math.floor(new Date/1e3),i=e-this.clockDrift;return i<this.accessToken.getExpiration()&&i<this.idToken.getExpiration()},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var An=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Un=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ut=function(){function n(){}var t=n.prototype;return t.getNowString=function(){var e=new Date,i=Un[e.getUTCDay()],s=An[e.getUTCMonth()],u=e.getUTCDate(),f=e.getUTCHours();f<10&&(f="0"+f);var l=e.getUTCMinutes();l<10&&(l="0"+l);var d=e.getUTCSeconds();d<10&&(d="0"+d);var p=e.getUTCFullYear(),v=i+" "+s+" "+u+" "+f+":"+l+":"+d+" UTC "+p;return v},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Ve=function(){function n(r){var e=r===void 0?{}:r,i=e.Name,s=e.Value;this.Name=i||"",this.Value=s||""}var t=n.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var z={},En=function(){function n(){}return n.setItem=function(r,e){return z[r]=e,z[r]},n.getItem=function(r){return Object.prototype.hasOwnProperty.call(z,r)?z[r]:void 0},n.removeItem=function(r){return delete z[r]},n.clear=function(){return z={},z},n}(),mt=function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=En}}var t=n.prototype;return t.getStorage=function(){return this.storageWindow},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Tn=typeof navigator<"u",ft=Tn?vt.isReactNative?"react-native":navigator.userAgent:"nodejs",X=function(){function n(r){if(r==null||r.Username==null||r.Pool==null)throw new Error("Username and Pool information are required.");this.username=r.Username||"",this.pool=r.Pool,this.Session=null,this.client=r.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=r.Storage||new mt().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=n.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,i){var s=this,u=e.getAuthParameters();u.USERNAME=this.username;var f=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),l={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:u,ClientMetadata:f};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",l,function(d,p){if(d)return i.onFailure(d);var v=p.ChallengeName,m=p.ChallengeParameters;return v==="CUSTOM_CHALLENGE"?(s.Session=p.Session,i.customChallenge(m)):(s.signInUserSession=s.getCognitoUserSession(p.AuthenticationResult),s.cacheTokens(),i.onSuccess(s.signInUserSession))})},t.authenticateUser=function(e,i){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(e,i):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(e,i):i.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,i){var s=this,u=new ne(this.pool.getUserPoolName()),f=new ut,l,d,p={};this.deviceKey!=null&&(p.DEVICE_KEY=this.deviceKey),p.USERNAME=this.username,u.getLargeAValue(function(v,m){v&&i.onFailure(v),p.SRP_A=m.toString(16),s.authenticationFlowType==="CUSTOM_AUTH"&&(p.CHALLENGE_NAME="SRP_A");var S=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),U={AuthFlow:s.authenticationFlowType,ClientId:s.pool.getClientId(),AuthParameters:p,ClientMetadata:S};s.getUserContextData(s.username)&&(U.UserContextData=s.getUserContextData(s.username)),s.client.request("InitiateAuth",U,function(A,x){if(A)return i.onFailure(A);var T=x.ChallengeParameters;s.username=T.USER_ID_FOR_SRP,s.userDataKey=s.keyPrefix+"."+s.username+".userData",l=new C(T.SRP_B,16),d=new C(T.SALT,16),s.getCachedDeviceKeyAndPassword(),u.getPasswordAuthenticationKey(s.username,e.getPassword(),l,d,function(P,Q){P&&i.onFailure(P);var k=f.getNowString(),J=_.Buffer.concat([_.Buffer.from(s.pool.getUserPoolName(),"utf8"),_.Buffer.from(s.username,"utf8"),_.Buffer.from(T.SECRET_BLOCK,"base64"),_.Buffer.from(k,"utf8")]),G=new se.Sha256(Q);G.update(J);var ue=G.digestSync(),j=_.Buffer.from(ue).toString("base64"),O={};O.USERNAME=s.username,O.PASSWORD_CLAIM_SECRET_BLOCK=T.SECRET_BLOCK,O.TIMESTAMP=k,O.PASSWORD_CLAIM_SIGNATURE=j,s.deviceKey!=null&&(O.DEVICE_KEY=s.deviceKey);var $=function(te,he){return s.client.request("RespondToAuthChallenge",te,function(Z,Ie){return Z&&Z.code==="ResourceNotFoundException"&&Z.message.toLowerCase().indexOf("device")!==-1?(O.DEVICE_KEY=null,s.deviceKey=null,s.randomPassword=null,s.deviceGroupKey=null,s.clearCachedDeviceKeyAndPassword(),$(te,he)):he(Z,Ie)})},ee={ChallengeName:"PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:O,Session:x.Session,ClientMetadata:S};s.getUserContextData()&&(ee.UserContextData=s.getUserContextData()),$(ee,function(fe,te){return fe?i.onFailure(fe):s.authenticateUserInternal(te,u,i)})})})})},t.authenticateUserPlainUsernamePassword=function(e,i){var s=this,u={};if(u.USERNAME=this.username,u.PASSWORD=e.getPassword(),!u.PASSWORD){i.onFailure(new Error("PASSWORD parameter is required"));return}var f=new ne(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var l=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),d={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:u,ClientMetadata:l};this.getUserContextData(this.username)&&(d.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",d,function(p,v){return p?i.onFailure(p):s.authenticateUserInternal(v,f,i)})},t.authenticateUserInternal=function(e,i,s){var u=this,f=e.ChallengeName,l=e.ChallengeParameters;if(f==="SMS_MFA")return this.Session=e.Session,s.mfaRequired(f,l);if(f==="SELECT_MFA_TYPE")return this.Session=e.Session,s.selectMFAType(f,l);if(f==="MFA_SETUP")return this.Session=e.Session,s.mfaSetup(f,l);if(f==="SOFTWARE_TOKEN_MFA")return this.Session=e.Session,s.totpRequired(f,l);if(f==="CUSTOM_CHALLENGE")return this.Session=e.Session,s.customChallenge(l);if(f==="NEW_PASSWORD_REQUIRED"){this.Session=e.Session;var d=null,p=null,v=[],m=i.getNewPasswordRequiredChallengeUserAttributePrefix();if(l&&(d=JSON.parse(e.ChallengeParameters.userAttributes),p=JSON.parse(e.ChallengeParameters.requiredAttributes)),p)for(var S=0;S<p.length;S++)v[S]=p[S].substr(m.length);return s.newPasswordRequired(d,v)}if(f==="DEVICE_SRP_AUTH"){this.Session=e.Session,this.getDeviceResponse(s);return}this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=f,this.cacheTokens();var U=e.AuthenticationResult.NewDeviceMetadata;if(U==null)return s.onSuccess(this.signInUserSession);i.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(A){if(A)return s.onFailure(A);var x={Salt:_.Buffer.from(i.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_.Buffer.from(i.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=x.PasswordVerifier,u.deviceGroupKey=U.DeviceGroupKey,u.randomPassword=i.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:U.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:x,DeviceName:ft},function(T,P){return T?s.onFailure(T):(u.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),P.UserConfirmationNecessary===!0?s.onSuccess(u.signInUserSession,P.UserConfirmationNecessary):s.onSuccess(u.signInUserSession))})})},t.completeNewPasswordChallenge=function(e,i,s,u){var f=this;if(!e)return s.onFailure(new Error("New password is required."));var l=new ne(this.pool.getUserPoolName()),d=l.getNewPasswordRequiredChallengeUserAttributePrefix(),p={};i&&Object.keys(i).forEach(function(m){p[d+m]=i[m]}),p.NEW_PASSWORD=e,p.USERNAME=this.username;var v={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:p,Session:this.Session,ClientMetadata:u};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",v,function(m,S){return m?s.onFailure(m):f.authenticateUserInternal(S,l,s)})},t.getDeviceResponse=function(e,i){var s=this,u=new ne(this.deviceGroupKey),f=new ut,l={};l.USERNAME=this.username,l.DEVICE_KEY=this.deviceKey,u.getLargeAValue(function(d,p){d&&e.onFailure(d),l.SRP_A=p.toString(16);var v={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:l,ClientMetadata:i,Session:s.Session};s.getUserContextData()&&(v.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",v,function(m,S){if(m)return e.onFailure(m);var U=S.ChallengeParameters,A=new C(U.SRP_B,16),x=new C(U.SALT,16);u.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,A,x,function(T,P){if(T)return e.onFailure(T);var Q=f.getNowString(),k=_.Buffer.concat([_.Buffer.from(s.deviceGroupKey,"utf8"),_.Buffer.from(s.deviceKey,"utf8"),_.Buffer.from(U.SECRET_BLOCK,"base64"),_.Buffer.from(Q,"utf8")]),J=new se.Sha256(P);J.update(k);var G=J.digestSync(),ue=_.Buffer.from(G).toString("base64"),j={};j.USERNAME=s.username,j.PASSWORD_CLAIM_SECRET_BLOCK=U.SECRET_BLOCK,j.TIMESTAMP=Q,j.PASSWORD_CLAIM_SIGNATURE=ue,j.DEVICE_KEY=s.deviceKey;var O={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:j,Session:S.Session};s.getUserContextData()&&(O.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",O,function($,ee){return $?e.onFailure($):(s.signInUserSession=s.getCognitoUserSession(ee.AuthenticationResult),s.cacheTokens(),e.onSuccess(s.signInUserSession))})})})})},t.confirmRegistration=function(e,i,s,u){var f={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:i,ClientMetadata:u};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",f,function(l){return l?s(l,null):s(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,i,s){var u=this,f={};f.USERNAME=this.username,f.ANSWER=e;var l=new ne(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(f.DEVICE_KEY=this.deviceKey);var d={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:f,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",d,function(p,v){return p?i.onFailure(p):u.authenticateUserInternal(v,l,i)})},t.sendMFACode=function(e,i,s,u){var f=this,l={};l.USERNAME=this.username,l.SMS_MFA_CODE=e;var d=s||"SMS_MFA";d==="SOFTWARE_TOKEN_MFA"&&(l.SOFTWARE_TOKEN_MFA_CODE=e),this.deviceKey!=null&&(l.DEVICE_KEY=this.deviceKey);var p={ChallengeName:d,ChallengeResponses:l,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:u};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",p,function(v,m){if(v)return i.onFailure(v);var S=m.ChallengeName;if(S==="DEVICE_SRP_AUTH"){f.getDeviceResponse(i);return}if(f.signInUserSession=f.getCognitoUserSession(m.AuthenticationResult),f.cacheTokens(),m.AuthenticationResult.NewDeviceMetadata==null)return i.onSuccess(f.signInUserSession);var U=new ne(f.pool.getUserPoolName());U.generateHashDevice(m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,m.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(A){if(A)return i.onFailure(A);var x={Salt:_.Buffer.from(U.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_.Buffer.from(U.getVerifierDevices(),"hex").toString("base64")};f.verifierDevices=x.PasswordVerifier,f.deviceGroupKey=m.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,f.randomPassword=U.getRandomPassword(),f.client.request("ConfirmDevice",{DeviceKey:m.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:f.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:x,DeviceName:ft},function(T,P){return T?i.onFailure(T):(f.deviceKey=m.AuthenticationResult.NewDeviceMetadata.DeviceKey,f.cacheDeviceKeyAndPassword(),P.UserConfirmationNecessary===!0?i.onSuccess(f.signInUserSession,P.UserConfirmationNecessary):i.onSuccess(f.signInUserSession))})})})},t.changePassword=function(e,i,s,u){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return s(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:u},function(f){return f?s(f,null):s(null,"SUCCESS")})},t.enableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var i=[],s={DeliveryMedium:"SMS",AttributeName:"phone_number"};i.push(s),this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(u){return u?e(u,null):e(null,"SUCCESS")})},t.setUserMfaPreference=function(e,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(u){return u?s(u,null):s(null,"SUCCESS")})},t.disableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var i=[];this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?e(s,null):e(null,"SUCCESS")})},t.deleteUser=function(e,i){var s=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},function(u){return u?e(u,null):(s.clearCachedUser(),e(null,"SUCCESS"))})},t.updateAttributes=function(e,i,s){var u=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:s},function(f,l){return f?i(f,null):u.getUserData(function(){return i(null,"SUCCESS",l)},{bypassCache:!0})})},t.getUserAttributes=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,s){if(i)return e(i,null);for(var u=[],f=0;f<s.UserAttributes.length;f++){var l={Name:s.UserAttributes[f].Name,Value:s.UserAttributes[f].Value},d=new Ve(l);u.push(d)}return e(null,u)})},t.getMFAOptions=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,s){return i?e(i,null):e(null,s.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var i=this;return e===void 0&&(e={}),new Promise(function(s){var u=i.signInUserSession.getRefreshToken();u&&u.getToken()?i.refreshSession(u,s,e.clientMetadata):s()})},t.getUserData=function(e,i){var s=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var u=this.getUserDataFromCache();if(!u){this.fetchUserData().then(function(f){e(null,f)}).catch(e);return}if(this.isFetchUserDataAndTokenRequired(i)){this.fetchUserData().then(function(f){return s.refreshSessionIfPossible(i).then(function(){return f})}).then(function(f){return e(null,f)}).catch(e);return}try{e(null,JSON.parse(u));return}catch(f){this.clearCachedUserData(),e(f,null);return}},t.getUserDataFromCache=function(){var e=this.storage.getItem(this.userDataKey);return e},t.isFetchUserDataAndTokenRequired=function(e){var i=e||{},s=i.bypassCache,u=s===void 0?!1:s;return u},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then(function(i){return e.cacheUserData(i),i})},t.deleteAttributes=function(e,i){var s=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(u){return u?i(u,null):s.getUserData(function(){return i(null,"SUCCESS")},{bypassCache:!0})})},t.resendConfirmationCode=function(e,i){var s={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.client.request("ResendConfirmationCode",s,function(u,f){return u?e(u,null):e(null,f)})},t.getSession=function(e,i){if(i===void 0&&(i={}),this.username==null)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var s="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,u=s+".idToken",f=s+".accessToken",l=s+".refreshToken",d=s+".clockDrift";if(this.storage.getItem(u)){var p=new st({IdToken:this.storage.getItem(u)}),v=new it({AccessToken:this.storage.getItem(f)}),m=new ot({RefreshToken:this.storage.getItem(l)}),S=parseInt(this.storage.getItem(d),0)||0,U={IdToken:p,AccessToken:v,RefreshToken:m,ClockDrift:S},A=new at(U);if(A.isValid())return this.signInUserSession=A,e(null,this.signInUserSession);if(!m.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(m,e,i.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,i,s){var u=this,f=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(i):i,l={};l.REFRESH_TOKEN=e.getToken();var d="CognitoIdentityServiceProvider."+this.pool.getClientId(),p=d+".LastAuthUser";if(this.storage.getItem(p)){this.username=this.storage.getItem(p);var v=d+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(v),l.DEVICE_KEY=this.deviceKey}var m={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:l,ClientMetadata:s};this.getUserContextData()&&(m.UserContextData=this.getUserContextData()),this.client.requestWithRetry("InitiateAuth",m,function(S,U){if(S)return S.code==="NotAuthorizedException"&&u.clearCachedUser(),f(S,null);if(U){var A=U.AuthenticationResult;return Object.prototype.hasOwnProperty.call(A,"RefreshToken")||(A.RefreshToken=e.getToken()),u.signInUserSession=u.getCognitoUserSession(A),u.cacheTokens(),f(null,u.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),i=e+"."+this.username+".idToken",s=e+"."+this.username+".accessToken",u=e+"."+this.username+".refreshToken",f=e+"."+this.username+".clockDrift",l=e+".LastAuthUser";this.storage.setItem(i,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(u,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(f,""+this.signInUserSession.getClockDrift()),this.storage.setItem(l,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=e+".deviceKey",s=e+".randomPasswordKey",u=e+".deviceGroupKey";this.storage.setItem(i,this.deviceKey),this.storage.setItem(s,this.randomPassword),this.storage.setItem(u,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=e+".deviceKey",s=e+".randomPasswordKey",u=e+".deviceGroupKey";this.storage.getItem(i)&&(this.deviceKey=this.storage.getItem(i),this.randomPassword=this.storage.getItem(s),this.deviceGroupKey=this.storage.getItem(u))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=e+".deviceKey",s=e+".randomPasswordKey",u=e+".deviceGroupKey";this.storage.removeItem(i),this.storage.removeItem(s),this.storage.removeItem(u)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),i=e+"."+this.username+".idToken",s=e+"."+this.username+".accessToken",u=e+"."+this.username+".refreshToken",f=e+".LastAuthUser",l=e+"."+this.username+".clockDrift";this.storage.removeItem(i),this.storage.removeItem(s),this.storage.removeItem(u),this.storage.removeItem(f),this.storage.removeItem(l)},t.getCognitoUserSession=function(e){var i=new st(e),s=new it(e),u=new ot(e),f={IdToken:i,AccessToken:s,RefreshToken:u};return new at(f)},t.forgotPassword=function(e,i){var s={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",s,function(u,f){return u?e.onFailure(u):typeof e.inputVerificationCode=="function"?e.inputVerificationCode(f):e.onSuccess(f)})},t.confirmPassword=function(e,i,s,u){var f={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:i,ClientMetadata:u};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",f,function(l){return l?s.onFailure(l):s.onSuccess("SUCCESS")})},t.getAttributeVerificationCode=function(e,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},function(u,f){return u?i.onFailure(u):typeof i.inputVerificationCode=="function"?i.inputVerificationCode(f):i.onSuccess("SUCCESS")})},t.verifyAttribute=function(e,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(u){return u?s.onFailure(u):s.onSuccess("SUCCESS")})},t.getDevice=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(i,s){return i?e.onFailure(i):e.onSuccess(s)})},t.forgetSpecificDevice=function(e,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(s){return s?i.onFailure(s):i.onSuccess("SUCCESS")})},t.forgetDevice=function(e){var i=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(u){return i.deviceKey=null,i.deviceGroupKey=null,i.randomPassword=null,i.clearCachedDeviceKeyAndPassword(),e.onSuccess(u)}})},t.setDeviceStatusRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(i){return i?e.onFailure(i):e.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(i){return i?e.onFailure(i):e.onSuccess("SUCCESS")})},t.listDevices=function(e,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));var u={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};i&&(u.PaginationToken=i),this.client.request("ListDevices",u,function(f,l){return f?s.onFailure(f):s.onSuccess(l)})},t.globalSignOut=function(e){var i=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?e.onFailure(s):(i.clearCachedUser(),e.onSuccess("SUCCESS"))})},t.signOut=function(e){var i=this;if(!e||typeof e!="function"){this.cleanClientData();return}this.getSession(function(s,u){if(s)return e(s);i.revokeTokens(function(f){i.cleanClientData(),e(f)})})},t.revokeTokens=function(e){if(e===void 0&&(e=function(){}),typeof e!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var i=new Error("User is not authenticated");return e(i)}if(!this.signInUserSession.getAccessToken()){var s=new Error("No Access token available");return e(s)}var u=this.signInUserSession.getRefreshToken().getToken(),f=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(f)&&u)return this.revokeToken({token:u,callback:e});e()},t.isSessionRevocable=function(e){if(e&&typeof e.decodePayload=="function")try{var i=e.decodePayload(),s=i.origin_jti;return!!s}catch{}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var i=e.token,s=e.callback;this.client.requestWithRetry("RevokeToken",{Token:i,ClientId:this.pool.getClientId()},function(u){if(u)return s(u);s()})},t.sendMFASelectionAnswer=function(e,i){var s=this,u={};u.USERNAME=this.username,u.ANSWER=e;var f={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(l,d){if(l)return i.onFailure(l);if(s.Session=d.Session,e==="SMS_MFA")return i.mfaRequired(d.ChallengeName,d.ChallengeParameters);if(e==="SOFTWARE_TOKEN_MFA")return i.totpRequired(d.ChallengeName,d.ChallengeParameters)})},t.getUserContextData=function(){var e=this.pool;return e.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var i=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s,u){return s?e.onFailure(s):e.associateSecretCode(u.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(s,u){return s?e.onFailure(s):(i.Session=u.Session,e.associateSecretCode(u.SecretCode))})},t.verifySoftwareToken=function(e,i,s){var u=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:i},function(f,l){return f?s.onFailure(f):s.onSuccess(l)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:i},function(f,l){if(f)return s.onFailure(f);u.Session=l.Session;var d={};d.USERNAME=u.username;var p={ChallengeName:"MFA_SETUP",ClientId:u.pool.getClientId(),ChallengeResponses:d,Session:u.Session};u.getUserContextData()&&(p.UserContextData=u.getUserContextData()),u.client.request("RespondToAuthChallenge",p,function(v,m){return v?s.onFailure(v):(u.signInUserSession=u.getCognitoUserSession(m.AuthenticationResult),u.cacheTokens(),s.onSuccess(u.signInUserSession))})})},n}();function xn(n,t){return t=t||{},new Promise(function(r,e){var i=new XMLHttpRequest,s=[],u=[],f={},l=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:l,headers:{keys:function(){return s},entries:function(){return u},get:function(p){return f[p.toLowerCase()]},has:function(p){return p.toLowerCase()in f}}}};for(var d in i.open(t.method||"get",n,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(p,v,m){s.push(v=v.toLowerCase()),u.push([v,m]),f[v]=f[v]?f[v]+","+m:m}),r(l())},i.onerror=e,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(d,t.headers[d]);i.send(t.body||null)})}const Dn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),ht=je(Dn);self.fetch||(self.fetch=ht.default||ht);function ie(){}ie.prototype.userAgent=Cn();var _n=function(t){var r=ie.category?" "+ie.category:"",e=ie.framework?" framework/"+ie.framework:"",i=""+ie.prototype.userAgent+r+e;return i};function In(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,le(n,t)}function Le(n){var t=typeof Map=="function"?new Map:void 0;return Le=function(e){if(e===null||!Rn(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Fn(e,arguments,qe(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),le(i,e)},Le(n)}function Fn(n,t,r){if(yt())return Reflect.construct.apply(null,arguments);var e=[null];e.push.apply(e,t);var i=new(n.bind.apply(n,e));return r&&le(i,r.prototype),i}function yt(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yt=function(){return!!n})()}function Rn(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function le(n,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},le(n,t)}function qe(n){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qe(n)}var Pn=function(n){function t(r,e,i,s){var u;return u=n.call(this,r)||this,u.code=e,u.name=i,u.statusCode=s,u}return In(t,n),t}(Le(Error)),Bn=function(){function n(r,e,i){this.endpoint=e||"https://cognito-idp."+r+".amazonaws.com/";var s=i||{},u=s.credentials;this.fetchOptions=u?{credentials:u}:{}}var t=n.prototype;return t.promisifyRequest=function(e,i){var s=this;return new Promise(function(u,f){s.request(e,i,function(l,d){l?f(new Pn(l.message,l.code,l.name,l.statusCode)):u(d)})})},t.requestWithRetry=function(e,i,s){var u=this,f=5*1e3;Nn(function(l){return new Promise(function(d,p){u.request(e,l,function(v,m){v?p(v):d(m)})})},[i],f).then(function(l){return s(null,l)}).catch(function(l){return s(l)})},t.request=function(e,i,s){var u={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":_n(),"Cache-Control":"no-store"},f=Object.assign({},this.fetchOptions,{headers:u,method:"POST",mode:"cors",body:JSON.stringify(i)}),l;fetch(this.endpoint,f).then(function(d){return l=d,d},function(d){throw d instanceof TypeError?new Error("Network error"):d}).then(function(d){return d.json().catch(function(){return{}})}).then(function(d){if(l.ok)return s(null,d);var p=(d.__type||d.code).split("#").pop(),v=new Error(d.message||d.Message||null);return v.name=p,v.code=p,s(v)}).catch(function(d){if(l&&l.headers&&l.headers.get("x-amzn-errortype"))try{var p=l.headers.get("x-amzn-errortype").split(":")[0],v=new Error(l.status?l.status.toString():null);return v.code=p,v.name=p,v.statusCode=l.status,s(v)}catch{return s(d)}else d instanceof Error&&d.message==="Network error"&&(d.code="NetworkError");return s(d)})},n}(),ye={debug:function(){}},bn=function(t){var r="nonRetryable";return t&&t[r]};function wt(n,t,r,e){if(e===void 0&&(e=1),typeof n!="function")throw Error("functionToRetry must be a function");return ye.debug(n.name+" attempt #"+e+" with args: "+JSON.stringify(t)),n.apply(void 0,t).catch(function(i){if(ye.debug("error on "+n.name,i),bn(i))throw ye.debug(n.name+" non retryable error",i),i;var s=r(e,t,i);if(ye.debug(n.name+" retrying in "+s+" ms"),s!==!1)return new Promise(function(u){return setTimeout(u,s)}).then(function(){return wt(n,t,r,e+1)});throw i})}function Mn(n){var t=100,r=100;return function(e){var i=Math.pow(2,e)*t+r*Math.random();return i>n?!1:i}}var On=5*60*1e3;function Nn(n,t,r){return r===void 0&&(r=On),wt(n,t,Mn(r))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var kn=55,Kn=function(){function n(r,e){var i=r||{},s=i.UserPoolId,u=i.ClientId,f=i.endpoint,l=i.fetchOptions,d=i.AdvancedSecurityDataCollectionFlag;if(!s||!u)throw new Error("Both UserPoolId and ClientId are required.");if(s.length>kn||!/^[\w-]+_[0-9a-zA-Z]+$/.test(s))throw new Error("Invalid UserPoolId format.");var p=s.split("_")[0];this.userPoolId=s,this.clientId=u,this.client=new Bn(p,f,l),this.advancedSecurityDataCollectionFlag=d!==!1,this.storage=r.Storage||new mt().getStorage(),e&&(this.wrapRefreshSessionCallback=e)}var t=n.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(e,i,s,u,f,l){var d=this,p={ClientId:this.clientId,Username:e,Password:i,UserAttributes:s,ValidationData:u,ClientMetadata:l};this.getUserContextData(e)&&(p.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",p,function(v,m){if(v)return f(v,null);var S={Username:e,Pool:d,Storage:d.storage},U={user:new X(S),userConfirmed:m.UserConfirmed,userSub:m.UserSub,codeDeliveryDetails:m.CodeDeliveryDetails};return f(null,U)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",i=this.storage.getItem(e);if(i){var s={Username:i,Pool:this,Storage:this.storage};return new X(s)}return null},t.getUserContextData=function(e){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var i=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var s=i.getData(e,this.userPoolId,this.clientId);if(s){var u={EncodedData:s};return u}}return{}}},n}(),Vn={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(n,t){(function(r){var e;if(n.exports=r(),e=!0,!e){var i=window.Cookies,s=window.Cookies=r();s.noConflict=function(){return window.Cookies=i,s}}})(function(){function r(){for(var s=0,u={};s<arguments.length;s++){var f=arguments[s];for(var l in f)u[l]=f[l]}return u}function e(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function i(s){function u(){}function f(d,p,v){if(!(typeof document>"u")){v=r({path:"/"},u.defaults,v),typeof v.expires=="number"&&(v.expires=new Date(new Date*1+v.expires*864e5)),v.expires=v.expires?v.expires.toUTCString():"";try{var m=JSON.stringify(p);/^[\{\[]/.test(m)&&(p=m)}catch{}p=s.write?s.write(p,d):encodeURIComponent(String(p)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),d=encodeURIComponent(String(d)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var S="";for(var U in v)v[U]&&(S+="; "+U,v[U]!==!0&&(S+="="+v[U].split(";")[0]));return document.cookie=d+"="+p+S}}function l(d,p){if(!(typeof document>"u")){for(var v={},m=document.cookie?document.cookie.split("; "):[],S=0;S<m.length;S++){var U=m[S].split("="),A=U.slice(1).join("=");!p&&A.charAt(0)==='"'&&(A=A.slice(1,-1));try{var x=e(U[0]);if(A=(s.read||s)(A,x)||e(A),p)try{A=JSON.parse(A)}catch{}if(v[x]=A,d===x)break}catch{}}return d?v[d]:v}}return u.set=f,u.get=function(d){return l(d,!1)},u.getJSON=function(d){return l(d,!0)},u.remove=function(d,p){f(d,"",r(p,{expires:-1}))},u.defaults={},u.withConverter=i,u}return i(function(){})})})(Vn);const Ln="us-east-1_WwnoPJw89",_e="1jv915b57ghp8m23r73e456bl8",St="us-east-1wwnopjw89.auth.us-east-1.amazoncognito.com",Ct=`${window.location.origin}/login.html`;let Pe=null;function W(){return Pe||(Pe=new Kn({UserPoolId:Ln,ClientId:_e})),Pe}function jn(n,t,r){return new Promise((e,i)=>{const s=[new Ve({Name:"email",Value:n})];r&&s.push(new Ve({Name:"name",Value:r})),W().signUp(n,t,s,[],(u,f)=>{if(u){i(u);return}e()})})}function Hn(n,t){return new Promise((r,e)=>{new X({Username:n,Pool:W()}).confirmRegistration(t,!0,(s,u)=>{if(s){e(s);return}r()})})}function Yn(n){return new Promise((t,r)=>{new X({Username:n,Pool:W()}).resendConfirmationCode((i,s)=>{if(i){r(i);return}t()})})}function Wn(n,t){return new Promise((r,e)=>{const i=new X({Username:n,Pool:W()}),s=new Bt({Username:n,Password:t});i.authenticateUser(s,{onSuccess:u=>r(u),onFailure:u=>e(u)})})}function Jn(){const n=`https://${St}/oauth2/authorize?response_type=code&client_id=${_e}&redirect_uri=${encodeURIComponent(Ct)}&identity_provider=Google&scope=openid+email+profile`;window.location.href=n}async function Gn(n){const t=await fetch(`https://${St}/oauth2/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",client_id:_e,code:n,redirect_uri:Ct})});if(!t.ok){const r=await t.text();throw new Error(`Token exchange failed: ${r}`)}return t.json()}function $n(){const n=W().getCurrentUser();n&&n.signOut(),localStorage.removeItem("easydrill-auth-tokens")}function Zn(n){return new Promise((t,r)=>{new X({Username:n,Pool:W()}).forgotPassword({onSuccess:()=>t(),onFailure:i=>r(i)})})}function zn(n,t,r){return new Promise((e,i)=>{new X({Username:n,Pool:W()}).confirmPassword(t,r,{onSuccess:()=>e(),onFailure:u=>i(u)})})}function qn(){return new Promise(n=>{const t=W().getCurrentUser();if(!t){const r=localStorage.getItem("easydrill-auth-tokens");if(r)try{const e=JSON.parse(r);n(e)}catch{n(null)}else n(null);return}t.getSession((r,e)=>{if(r||!e){n(null);return}n(e)})})}async function Xn(){const n=localStorage.getItem("easydrill-auth-tokens");if(n)try{const r=JSON.parse(n);if(r.id_token)return r.id_token}catch{}const t=await qn();return t&&t instanceof Object&&"getIdToken"in t?t.getIdToken().getJwtToken():null}function Qn(n){localStorage.setItem("easydrill-auth-tokens",JSON.stringify(n))}function ei(){return!!_e}export{zn as confirmForgotPassword,Hn as confirmSignUp,Gn as exchangeCodeForTokens,Zn as forgotPassword,qn as getCurrentSession,Xn as getIdToken,ei as isCognitoConfigured,Yn as resendConfirmationCode,Wn as signIn,Jn as signInWithGoogle,$n as signOut,jn as signUp,Qn as storeOAuthTokens};
